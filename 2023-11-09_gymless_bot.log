2023-11-09 02:02:30,205 - INFO - Пользователь с user_id: 802693897 уже существует
2023-11-09 02:02:37,750 - INFO - Пользователь с user_id: 802693897 уже существует
2023-11-09 02:03:48,807 - ERROR - Infinity polling: polling exited
2023-11-09 02:03:48,807 - ERROR - Break infinity polling
2023-11-09 02:05:21,462 - INFO - Новый пользователь с user_id: 802693897, добавляем его в базу данных и начинаем диалог
2023-11-09 02:05:21,683 - INFO - Для пользователя user_id: 802693897 нет контекста. Создаем контекст и счетчик токенов
2023-11-09 02:05:21,683 - INFO - Задаем system на промпт 1
2023-11-09 02:05:30,259 - INFO - Пользователь отправил текстоовое сообщение
2023-11-09 02:05:30,502 - INFO - Сообщение пользователя (user_id: 802693897): Я Егор, мне 17, хочу отжимания, инвентаря нет, болит колено, хочу тратить 40 минут в день, уровень физической подготовки 10
2023-11-09 02:05:30,502 - INFO - Добавляем полученный текст в контекст пользователя (user_id: 802693897)
2023-11-09 02:05:31,769 - INFO - error_code=insufficient_quota error_message='You exceeded your current quota, please check your plan and billing details.' error_param=None error_type=insufficient_quota message='OpenAI API error received' stream_error=False
2023-11-09 02:05:31,771 - ERROR - Infinity polling exception: You exceeded your current quota, please check your plan and billing details.
2023-11-09 02:05:31,773 - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 955, in infinity_polling
    self.polling(non_stop=True, timeout=timeout, long_polling_timeout=long_polling_timeout,
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1043, in polling
    self.__threaded_polling(non_stop=non_stop, interval=interval, timeout=timeout, long_polling_timeout=long_polling_timeout,
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1118, in __threaded_polling
    raise e
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1074, in __threaded_polling
    self.worker_pool.raise_exceptions()
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/util.py", line 147, in raise_exceptions
    raise self.exception_info
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/util.py", line 90, in run
    task(*args, **kwargs)
  File "/Users/ekondrashov/PycharmProjects/openai/main.py", line 124, in get_info
    form_completion = openai.ChatCompletion.create(
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/openai/api_resources/chat_completion.py", line 25, in create
    return super().create(*args, **kwargs)
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/openai/api_resources/abstract/engine_api_resource.py", line 155, in create
    response, _, api_key = requestor.request(
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/openai/api_requestor.py", line 299, in request
    resp, got_stream = self._interpret_response(result, stream)
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/openai/api_requestor.py", line 710, in _interpret_response
    self._interpret_response_line(
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/openai/api_requestor.py", line 775, in _interpret_response_line
    raise self.handle_error_response(
openai.error.RateLimitError: You exceeded your current quota, please check your plan and billing details.

2023-11-09 02:05:49,517 - ERROR - Infinity polling: polling exited
2023-11-09 02:05:49,517 - ERROR - Break infinity polling
2023-11-09 02:06:06,395 - INFO - Пользователь с user_id: 802693897 уже существует
2023-11-09 02:06:12,619 - INFO - Пользователь с user_id: 802693897 уже существует
2023-11-09 02:06:41,822 - ERROR - Infinity polling: polling exited
2023-11-09 02:06:41,822 - ERROR - Break infinity polling
2023-11-09 02:06:51,766 - INFO - Новый пользователь с user_id: 802693897, добавляем его в базу данных и начинаем диалог
2023-11-09 02:06:52,010 - INFO - Для пользователя user_id: 802693897 нет контекста. Создаем контекст и счетчик токенов
2023-11-09 02:06:52,010 - INFO - Задаем system на промпт 1
2023-11-09 02:06:56,428 - INFO - Пользователь отправил текстоовое сообщение
2023-11-09 02:06:56,594 - INFO - Сообщение пользователя (user_id: 802693897): Я Егор, мне 17, хочу отжимания, инвентаря нет, болит колено, хочу тратить 40 минут в день, уровень физической подготовки 10
2023-11-09 02:06:56,595 - INFO - Добавляем полученный текст в контекст пользователя (user_id: 802693897)
2023-11-09 02:07:01,104 - INFO - Получили ответ GPT. Ответ: Твоя анкета:
- Имя: Егор
- Возраст: 17 лет
- Пол: Мужской
- Уровень физической подготовки: 10/10
- Длительность занятия: 40 минут
- Физические ограничения: Болит колено
- Наличие спортивного инвентаря: Нет
- Пожелания по упражнениям: Хочу отжимания

Все верно? Если нужно что-то исправить или добавить, пожалуйста, скажи.
2023-11-09 02:07:01,104 - INFO - Считаем токены для пользователя (user_id: 802693897): 802693897, итого prompt_1 = 590
2023-11-09 02:07:01,104 - INFO - Переходим к уточняющим вопросам, если они нужны
2023-11-09 02:07:52,832 - INFO - Ответ пользователя (check_form): да, все верно
2023-11-09 02:07:52,833 - INFO - Добавляем ответ пользователя в контекст
2023-11-09 02:07:57,523 - INFO - Ответ от GPT получен. Ответ: Отлично! Спасибо за заполнение анкеты. Теперь у меня есть все необходимые данные. Если у тебя возникнут еще какие-либо вопросы или пожелания, не стесняйся обращаться. Удачных тренировок!
2023-11-09 02:07:57,524 - INFO - Считаем токены для пользователя (user_id: 802693897): 802693897, итого prompt_1 = 1274
2023-11-09 02:07:57,524 - INFO - Проверяем, есть ли слово тригер(анкета) в ответе от GPT
2023-11-09 02:07:57,524 - INFO - Слово тригер НЕ в ответе от GPT, продолжаем задавать вопросы пользователю
2023-11-09 02:08:21,679 - ERROR - Infinity polling: polling exited
2023-11-09 02:08:21,680 - ERROR - Break infinity polling
2023-11-09 02:10:56,498 - ERROR - Infinity polling: polling exited
2023-11-09 02:10:56,499 - ERROR - Break infinity polling
2023-11-09 02:11:06,577 - INFO - Новый пользователь с user_id: 802693897, добавляем его в базу данных и начинаем диалог
2023-11-09 02:11:06,844 - INFO - Для пользователя user_id: 802693897 нет контекста. Создаем контекст и счетчик токенов
2023-11-09 02:11:06,845 - INFO - Задаем system на промпт 1
2023-11-09 02:11:11,991 - INFO - Пользователь отправил текстоовое сообщение
2023-11-09 02:11:12,092 - INFO - Сообщение пользователя (user_id: 802693897): Я Егор, мне 17, хочу отжимания, инвентаря нет, болит колено, хочу тратить 40 минут в день, уровень физической подготовки 10
2023-11-09 02:11:12,093 - INFO - Добавляем полученный текст в контекст пользователя (user_id: 802693897)
2023-11-09 02:13:02,813 - ERROR - Infinity polling: polling exited
2023-11-09 02:13:02,814 - ERROR - Break infinity polling
2023-11-09 02:13:11,342 - INFO - Новый пользователь с user_id: 802693897, добавляем его в базу данных и начинаем диалог
2023-11-09 02:13:11,563 - INFO - Для пользователя user_id: 802693897 нет контекста. Создаем контекст и счетчик токенов
2023-11-09 02:13:11,564 - INFO - Задаем system на промпт 1
2023-11-09 02:13:13,607 - INFO - Пользователь отправил текстоовое сообщение
2023-11-09 02:13:13,861 - INFO - Сообщение пользователя (user_id: 802693897): Я Егор, мне 17, хочу отжимания, инвентаря нет, болит колено, хочу тратить 40 минут в день, уровень физической подготовки 10
2023-11-09 02:13:13,861 - INFO - Добавляем полученный текст в контекст пользователя (user_id: 802693897)
2023-11-09 02:13:17,243 - INFO - Получили ответ GPT. Ответ: Привет, Егор! Спасибо за заполнение анкеты. У тебя очень хороший уровень физической подготовки! Какая продолжительность одного занятия для тебя оптимальна? И есть ли у тебя еще какие-то пожелания по упражнениям?
2023-11-09 02:13:17,243 - INFO - Считаем токены для пользователя (user_id: 802693897): 802693897, итого prompt_1 = 623
2023-11-09 02:13:17,243 - INFO - Переходим к уточняющим вопросам, если они нужны
2023-11-09 02:13:44,015 - INFO - Ответ пользователя (check_form): я же написал, 40 минут в день, хочу только отжимания и ничего больше
2023-11-09 02:13:44,015 - INFO - Добавляем ответ пользователя в контекст
2023-11-09 02:13:47,835 - INFO - Ответ от GPT получен. Ответ: Извини, я пропустил эту информацию. Спасибо за уточнение. Вот твоя анкета:

Имя: Егор
Пол: Мужской
Возраст: 17 лет
Уровень физической подготовки: 10/10
Продолжительность занятия: 40 минут в день
Физические ограничения: Болит колено
Наличие спортивного инвентаря: Отсутствует
Пожелания по упражнениям: Только отжимания

Проверь, пожалуйста, все ли верно в анкете. Если есть что-то, что нужно исправить или добавить, напиши об этом.
2023-11-09 02:13:47,836 - INFO - Считаем токены для пользователя (user_id: 802693897): 802693897, итого prompt_1 = 1492
2023-11-09 02:13:47,836 - INFO - Проверяем, есть ли слово тригер(анкета) в ответе от GPT
2023-11-09 02:13:47,836 - INFO - Слово тригре в ответе от GPT, выдаем клаваиатуру, если ответ пользователя положительный, переходим к промпту 2
2023-11-09 02:13:57,515 - INFO - Переходим к финальной проверке анкеты пользователя. Ответ пользователя на форму: Да
2023-11-09 02:13:57,515 - INFO - Пользователь (user_id: 802693897) подтвердил корректность анкеты, начианем составлять для него программу
2023-11-09 02:13:57,620 - INFO - Перед составлением программы, получаем заполненую форму пользователя без лишнего текста, для того, чтобы передать ее в промпт 2
2023-11-09 02:14:01,160 - INFO - Получили форму пользователя (user_id: 802693897), форма: Твоя анкета:
Имя: Егор
Пол: Мужской
Возраст: 17 лет
Уровень физической подготовки: 10/10
Продолжительность занятия: 40 минут в день
Физические ограничения: Болит колено
Наличие спортивного инвентаря: Отсутствует
Пожелания по упражнениям: Только отжимания

Все верно? Если есть что-то, что нужно исправить, пожалуйста, напиши., передаем ее во 2 промпт
2023-11-09 02:14:01,160 - INFO - Считаем токены для пользователя (user_id: 802693897): 802693897, итого prompt_1 = 2325
2023-11-09 02:14:01,160 - INFO - Создаем программу на основе полученной формы (анкеты), ждем ответ от GPT
2023-11-09 02:14:21,729 - INFO - Ответ от GPT получен, программа готова: *Разминка:*

*1. Прогулка на месте: (3 минуты) {Ходи на месте, постепенно увеличивая темп и поднимая колени выше, активно размахивай руками}*

*2. Разминка плеч: (2 подхода, 30 секунд) {Выполняй круговые движения плечами, сначала вперед, затем назад}*

*3. Боковые наклоны: (2 подхода, 15 повторений) {Стоя прямо, руки в стороны, делай плавные наклоны влево и вправо, не наклоняйся вперед}*

*Основная часть:*

*1. Отжимания на коленях: (4 подхода, 15 повторений) {Прими упор лежа, колени на полу, корпус прямой, руки на ширине плеч. Опускай торс вниз, сгибая руки в локтях, затем поднимайся обратно} {с осторожностью из-за боли в колене, используй мягкую подложку под колени}*

*2. Отжимания с узкой постановкой рук: (3 подхода, 12 повторений) {То же, что и обычные отжимания, но руки ставь ближе друг к другу, чтобы акцентировать нагрузку на трицепсы}*

*3. Отжимания с широкой постановкой рук: (3 подхода, 12 повторений) {Руки ставь шире плеч, чтобы больше нагрузить грудные мышцы}*

*Заминка:*

*1. Растяжка грудных мышц: (2 подхода, 30 секунд) {Стоя у дверного проема, руки на уровне плеч, опирайся ладонями о стойки и мягко наклоняйся вперед}*

*2. Растяжка трицепсов: (2 подхода, 30 секунд на каждую руку) {Подними одну руку вверх, согни в локте и попытайся достать лопатку, другой рукой аккуратно нажимай на локоть}*

*3. Растяжка спины: (2 подхода, 30 секунд) {Стоя, наклонись вперед, пытаясь коснуться руками пола, не сгибая колени} {с осторожностью из-за боли в колене}*

Тебе подходит эта программа или есть что-то, что ты бы хотел изменить?
2023-11-09 02:14:21,730 - INFO - Считаем текущие токены пользователя (user_id: 802693897): итого prompt_2=1556
2023-11-09 02:14:34,485 - INFO - from check_program Да
2023-11-09 02:14:34,612 - INFO - Сохраняем программу для пользователя 802693897
2023-11-09 02:14:43,994 - INFO - программа Привет, Егор! Основываясь на твоей анкете, я составил для тебя индивидуальную программу тренировок дома. Учти, что тренировка начинается с разминки, затем идет основная часть (силовая), а в конце - заминка. 

Разминка:
*1. Прогулка на месте: (5 минут) {Постепенно увеличивай темп, поднимай колени выше, размахивай руками}*

Основная часть (силовая):
*2. Отжимания: (3 подхода, 10 повторений) {Ляг на пол, положи ладони на ширине плеч, вытяни ноги, согни локти и опусти грудь к полу, затем вернись в исходное положение}* 

Заминка:
*3. Растяжка ног: (2 подхода, по 30 секунд на каждую ногу) {Сядь на пол, вытяни одну ногу вперед, наклонись вперед и постарайся дотянуться до носка, удерживай позицию}* 

Это предварительная программа тренировок для тебя, учитывая твои пожелания и физические ограничения. Если что-то не подходит или ты хочешь что-то изменить, дай мне знать.
2023-11-09 02:16:47,235 - ERROR - Infinity polling exception: 'dict' object has no attribute 'append'
2023-11-09 02:16:47,240 - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 955, in infinity_polling
    self.polling(non_stop=True, timeout=timeout, long_polling_timeout=long_polling_timeout,
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1043, in polling
    self.__threaded_polling(non_stop=non_stop, interval=interval, timeout=timeout, long_polling_timeout=long_polling_timeout,
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1118, in __threaded_polling
    raise e
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1074, in __threaded_polling
    self.worker_pool.raise_exceptions()
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/util.py", line 147, in raise_exceptions
    raise self.exception_info
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/util.py", line 90, in run
    task(*args, **kwargs)
  File "/Users/ekondrashov/PycharmProjects/openai/main.py", line 281, in set_user_schedule
    context_messages_schedule[message.from_user.id].append({"role": "user", "content": user_answer})
AttributeError: 'dict' object has no attribute 'append'

2023-11-09 02:17:07,552 - ERROR - Infinity polling: polling exited
2023-11-09 02:17:07,552 - ERROR - Break infinity polling
2023-11-09 02:18:07,810 - ERROR - Infinity polling: polling exited
2023-11-09 02:18:07,811 - ERROR - Break infinity polling
2023-11-09 02:18:14,926 - INFO - Новый пользователь с user_id: 802693897, добавляем его в базу данных и начинаем диалог
2023-11-09 02:18:15,160 - INFO - Для пользователя user_id: 802693897 нет контекста. Создаем контекст и счетчик токенов
2023-11-09 02:18:15,160 - INFO - Задаем system на промпт 1
2023-11-09 02:18:20,837 - INFO - Пользователь отправил текстоовое сообщение
2023-11-09 02:18:21,113 - INFO - Сообщение пользователя (user_id: 802693897): Я Егор, мне 17, хочу отжимания, инвентаря нет, болит колено, хочу тратить 40 минут в день, уровень физической подготовки 10
2023-11-09 02:18:21,113 - INFO - Добавляем полученный текст в контекст пользователя (user_id: 802693897)
2023-11-09 02:18:25,407 - INFO - Получили ответ GPT. Ответ: Твоя анкета:
Имя: Егор
Возраст: 17 лет
Пол: Мужской
Уровень физической подготовки: 10/10
Продолжительность занятия: 40 минут
Физические ограничения: Болит колено
Наличие спортивного инвентаря: Нет
Пожелания по упражнениям: Отжимания

Все верно? Если есть что-то, что нужно исправить, напиши об этом.
2023-11-09 02:18:25,408 - INFO - Считаем токены для пользователя (user_id: 802693897): 802693897, итого prompt_1 = 673
2023-11-09 02:18:25,408 - INFO - Переходим к уточняющим вопросам, если они нужны
2023-11-09 02:18:34,402 - INFO - Ответ пользователя (check_form): ну да, все нормално
2023-11-09 02:18:34,402 - INFO - Добавляем ответ пользователя в контекст
2023-11-09 02:18:37,413 - INFO - Ответ от GPT получен. Ответ: Отлично! Твоя анкета заполнена. Теперь я могу составить для тебя индивидуальную программу тренировок, учитывая твои пожелания и физические ограничения. Если у тебя возникнут вопросы или пожелания в процессе тренировок, не стесняйся обращаться. Удачных тренировок!
2023-11-09 02:18:37,414 - INFO - Считаем токены для пользователя (user_id: 802693897): 802693897, итого prompt_1 = 1480
2023-11-09 02:18:37,414 - INFO - Проверяем, есть ли слово тригер(анкета) в ответе от GPT
2023-11-09 02:18:37,414 - INFO - Слово тригре в ответе от GPT, выдаем клаваиатуру, если ответ пользователя положительный, переходим к промпту 2
2023-11-09 02:18:44,249 - INFO - Переходим к финальной проверке анкеты пользователя. Ответ пользователя на форму: Да
2023-11-09 02:18:44,250 - INFO - Пользователь (user_id: 802693897) подтвердил корректность анкеты, начианем составлять для него программу
2023-11-09 02:18:44,357 - INFO - Перед составлением программы, получаем заполненую форму пользователя без лишнего текста, для того, чтобы передать ее в промпт 2
2023-11-09 02:18:47,859 - INFO - Получили форму пользователя (user_id: 802693897), форма: Твоя анкета:
Имя: Егор
Возраст: 17 лет
Пол: Мужской
Уровень физической подготовки: 10/10
Продолжительность занятия: 40 минут
Физические ограничения: Болит колено
Наличие спортивного инвентаря: Нет
Пожелания по упражнениям: Отжимания

Если все верно, то можешь начинать тренироваться. Если есть что-то, что нужно исправить, напиши об этом., передаем ее во 2 промпт
2023-11-09 02:18:47,860 - INFO - Считаем токены для пользователя (user_id: 802693897): 802693897, итого prompt_1 = 2343
2023-11-09 02:18:47,860 - INFO - Создаем программу на основе полученной формы (анкеты), ждем ответ от GPT
2023-11-09 02:19:12,230 - INFO - Ответ от GPT получен, программа готова: *Разминка:*

*1. Прогулка на месте: (3 минуты) {Ходи на месте, постепенно увеличивая темп и поднимая колени выше, активно размахивай руками}*

*2. Разгонка: (2 минуты) {Бег на месте с высоким поднятием колен}*

*3. Разведение рук в стороны: (2 подхода, 15 повторений) {Стоя, поднимай руки через стороны вверх и опускай обратно}*

*4. Растяжка квадрицепса: (2 подхода, 30 секунд на каждую ногу) {Стоя, подтяни пятку к ягодице, фиксируя положение рукой, с осторожностью из-за боли в колене}*

*Основная часть:*

*1. Отжимания: (4 подхода, 15 повторений) {Принимай упор лёжа, руки на ширине плеч, тело прямое, опускайся до угла в локтях 90 градусов и возвращайся в исходное положение}*

*2. Планка: (3 подхода, 1 минута) {Принимай упор лёжа, опирайся на предплечья и носки ног, тело держи прямо, не провисай в пояснице}*

*3. Боковые планки: (3 подхода, 30 секунд на каждую сторону) {Ляг на бок, опирайся на предплечье и стопу, подними бедра, создавая прямую линию тела}*

*4. Приседания: (3 подхода, 20 повторений) {Стоя, ноги на ширине плеч, приседай, отводя таз назад и держа спину прямой, с осторожностью из-за боли в колене}*

*Заминка:*

*1. Растяжка икроножных мышц: (2 подхода, 30 секунд на каждую ногу) {Встань лицом к стене, одну ногу вытяни назад, касаясь пяткой пола, другую согни в колене впереди}*

*2. Растяжка грудных мышц: (2 подхода, 30 секунд) {Встань в дверном проеме, руки на уровне плеч, согни локти под углом 90 градусов и мягко наклоняйся вперед}*

*3. Растяжка бедер: (2 подхода, 30 секунд на каждую ногу) {Сидя, одну ногу вытяни, другую согни в колене и коснись стопой внутренней части бедра вытянутой ноги, наклоняйся к вытянутой ноге}*

*4. Растяжка спины: (2 подхода, 30 секунд) {Сидя на полу, ноги вместе, максимально наклоняйся вперед, стараясь достать руками до носков}*

Подходит ли тебе такая программа, Егор? Что бы ты хотел изменить?
2023-11-09 02:19:12,231 - INFO - Считаем текущие токены пользователя (user_id: 802693897): итого prompt_2=1750
2023-11-09 02:19:14,795 - INFO - from check_program Да
2023-11-09 02:19:14,885 - INFO - Сохраняем программу для пользователя 802693897
2023-11-09 02:19:26,052 - INFO - программа Привет, Егор! Для тебя я подготовил индивидуальную программу тренировок дома. Учитывая твой уровень физической подготовки, возраст и пол, я предлагаю следующую программу:

Разминка:
*1. Прогулка на месте: (5 минут) {Постепенно увеличивай темп, поднимай колени выше, размахивай руками}*

Основная часть (силовая):
*2. Отжимания: (3 подхода, 10 повторений) {Ляг на пол, положи ладони на ширине плеч, руки прямые. Опусти тело, сгибая руки в локтях, затем поднимись в исходное положение}* 

*3. Приседания: (3 подхода, 12 повторений) {Стань прямо, ноги на ширине плеч, руки вытянуты перед собой. Медленно сядь, сгибая колени, затем вернись в исходное положение}* 

*4. Планка: (3 подхода, 30 секунд) {Ляг на пол, опираясь на предплечья и носки ног. Держи тело прямым, не давая ему провисать}* 

Заминка:
*5. Растяжка мышц: (5 минут) {Проведи растяжку всех групп мышц, уделяя особое внимание ногам, спине и плечам}*

Обрати внимание, что из-за боли в колене, выполняй упражнения с осторожностью. Если упражнение вызывает дискомфорт или усиливает боль, пропусти его и замени на другое упражнение, которое не нагружает колено.

Что ты думаешь об этой программе? Подходит ли она тебе или есть что-то, что нужно изменить?
2023-11-09 02:19:35,234 - ERROR - Infinity polling exception: 'dict' object has no attribute 'append'
2023-11-09 02:19:35,236 - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 955, in infinity_polling
    self.polling(non_stop=True, timeout=timeout, long_polling_timeout=long_polling_timeout,
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1043, in polling
    self.__threaded_polling(non_stop=non_stop, interval=interval, timeout=timeout, long_polling_timeout=long_polling_timeout,
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1118, in __threaded_polling
    raise e
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1074, in __threaded_polling
    self.worker_pool.raise_exceptions()
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/util.py", line 147, in raise_exceptions
    raise self.exception_info
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/util.py", line 90, in run
    task(*args, **kwargs)
  File "/Users/ekondrashov/PycharmProjects/openai/main.py", line 280, in set_user_schedule
    context_messages_schedule[message.from_user.id].append({"role": "user", "content": user_answer})
AttributeError: 'dict' object has no attribute 'append'

2023-11-09 02:20:28,251 - ERROR - Infinity polling: polling exited
2023-11-09 02:20:28,251 - ERROR - Break infinity polling
2023-11-09 02:21:32,798 - INFO - Новый пользователь с user_id: 802693897, добавляем его в базу данных и начинаем диалог
2023-11-09 02:21:33,066 - INFO - Для пользователя user_id: 802693897 нет контекста. Создаем контекст и счетчик токенов
2023-11-09 02:21:33,066 - INFO - Задаем system на промпт 1
2023-11-09 02:21:43,193 - INFO - Пользователь отправил текстоовое сообщение
2023-11-09 02:21:43,451 - INFO - Сообщение пользователя (user_id: 802693897): Я Егор, мне 17, хочу отжимания, инвентаря нет, болит колено, хочу тратить 40 минут в день, уровень физической подготовки 10
2023-11-09 02:21:43,451 - INFO - Добавляем полученный текст в контекст пользователя (user_id: 802693897)
2023-11-09 02:21:48,110 - INFO - Получили ответ GPT. Ответ: Твоя анкета:
Имя: Егор
Возраст: 17
Пол: Мужской
Уровень физической подготовки: 10
Продолжительность занятия: 40 минут
Физические ограничения: Болит колено
Наличие спортивного инвентаря: Нет
Пожелания по упражнениям: Отжимания

Все верно? Если есть что-то, что нужно исправить, напиши, пожалуйста.
2023-11-09 02:21:48,110 - INFO - Считаем токены для пользователя (user_id: 802693897): 802693897, итого prompt_1 = 673
2023-11-09 02:21:48,110 - INFO - Слово тригре в ответе от GPT, выдаем клаваиатуру, если ответ пользователя положительный, переходим к промпту 2
2023-11-09 02:21:48,235 - INFO - Переходим к уточняющим вопросам, если они нужны
2023-11-09 02:21:55,511 - INFO - Переходим к финальной проверке анкеты пользователя. Ответ пользователя на форму: Да
2023-11-09 02:21:55,513 - INFO - Пользователь (user_id: 802693897) подтвердил корректность анкеты, начианем составлять для него программу
2023-11-09 02:21:55,515 - INFO - Ответ пользователя (check_form): Да
2023-11-09 02:21:55,516 - INFO - Добавляем ответ пользователя в контекст
2023-11-09 02:21:55,640 - INFO - Перед составлением программы, получаем заполненую форму пользователя без лишнего текста, для того, чтобы передать ее в промпт 2
2023-11-09 02:21:57,371 - INFO - Ответ от GPT получен. Ответ: Отлично! Твоя анкета заполнена верно. Если у тебя возникнут какие-либо изменения или дополнения, просто сообщи мне. Теперь я могу составить для тебя индивидуальную программу тренировок.
2023-11-09 02:21:57,371 - INFO - Считаем токены для пользователя (user_id: 802693897): 802693897, итого prompt_1 = 1434
2023-11-09 02:21:57,371 - INFO - Проверяем, есть ли слово тригер(анкета) в ответе от GPT
2023-11-09 02:21:57,371 - INFO - Слово тригре в ответе от GPT, выдаем клаваиатуру, если ответ пользователя положительный, переходим к промпту 2
2023-11-09 02:21:59,242 - INFO - Получили форму пользователя (user_id: 802693897), форма: Твоя анкета:
Имя: Егор
Возраст: 17
Пол: Мужской
Уровень физической подготовки: 10
Продолжительность занятия: 40 минут
Физические ограничения: Болит колено
Наличие спортивного инвентаря: Нет
Пожелания по упражнениям: Отжимания

Все верно? Если есть что-то, что нужно исправить, напиши, пожалуйста., передаем ее во 2 промпт
2023-11-09 02:21:59,242 - INFO - Считаем токены для пользователя (user_id: 802693897): 802693897, итого prompt_1 = 2278
2023-11-09 02:21:59,242 - INFO - Создаем программу на основе полученной формы (анкеты), ждем ответ от GPT
2023-11-09 02:22:37,231 - INFO - Ответ от GPT получен, программа готова: *Разминка:*

*1.Ходьба на месте: (5 минут) {Поднимай колени высоко, активно размахивай руками}*

*2.Разгибания рук в стороны: (3 подхода, 15 повторений) {Встань прямо, поднимай руки через стороны вверх и опускай}*

*3.Повороты туловища: (3 подхода, 10 повторений на каждую сторону) {Встань прямо, ноги на ширине плеч, поворачивай туловище влево и вправо, сохраняя бедра неподвижными}*

*Основная часть:*

*1.Отжимания: (5 подходов, 15 повторений) {Прими упор лежа, руки на ширине плеч, тело прямое от головы до пяток, опускайся до уровня, когда грудь почти касается пола, и возвращайся в исходное положение. С осторожностью из-за боли в колене, если ощущаешь дискомфорт, сделай отжимания на коленях}*

*2.Планка: (4 подхода, по 30 секунд) {Прими упор лежа, опираясь на предплечья и носки ног. Тело должно образовывать прямую линию. Не поднимай и не опускай бедра. С осторожностью из-за боли в колене, если необходимо, опирайся на колени}*

*3.Боковая планка: (3 подхода по 20 секунд для каждой стороны) {Ляг на бок, опирайся на предплечье и стопу нижней ноги. Подними таз, образуя прямую линию тела. Держи позицию, затем смени сторону}*

*4.Приседания без нагрузки: (4 подхода, 20 повторений) {Встань прямо, ноги на ширине плеч, приседай, отводя таз назад и сохраняя спину прямой, колени не должны выходить за линию носков. С осторожностью из-за боли в колене, не приседай слишком глубоко}*

*Заминка:*

*1.Растяжка квадрицепсов: (2 подхода по 30 секунд для каждой ноги) {Встань, держась за опору, согни ногу в колене, возьмись за стопу и потяни её к ягодицам, не нагружая больное колено}*

*2.Растяжка икроножных мышц: (2 подхода по 30 секунд для каждой ноги) {Встань в шаге от стены, оперись руками о стену, передняя нога согнута в колене, задняя прямая, пятка на полу. Тянись вперед, растягивая икры задней ноги}*

*3.Растяжка грудных мышц: (2 подхода по 30 секунд) {Встань в дверном проеме, подними согнутые в локтях руки и упрись ладонями в косяки, шагни вперед, растягивая грудные мышцы}*

*4.Растяжка спины: (2 подхода по 30 секунд) {Сядь на пол, ноги прямо, тянись руками к ногам, не округляя спину}*

Подходит ли тебе эта программа или есть что-то, что ты хотел бы изменить?
2023-11-09 02:22:37,232 - INFO - Считаем текущие токены пользователя (user_id: 802693897): итого prompt_2=1876
2023-11-09 02:22:40,964 - INFO - Переходим к финальной проверке анкеты пользователя. Ответ пользователя на форму: Да
2023-11-09 02:22:40,965 - INFO - from check_program Да
2023-11-09 02:22:40,965 - INFO - Пользователь (user_id: 802693897) подтвердил корректность анкеты, начианем составлять для него программу
2023-11-09 02:22:41,063 - INFO - Сохраняем программу для пользователя 802693897
2023-11-09 02:22:41,103 - INFO - Перед составлением программы, получаем заполненую форму пользователя без лишнего текста, для того, чтобы передать ее в промпт 2
2023-11-09 02:22:42,455 - INFO - Получили форму пользователя (user_id: 802693897), форма: Форма, которую я получил, является квадратной., передаем ее во 2 промпт
2023-11-09 02:22:42,455 - INFO - Считаем токены для пользователя (user_id: 802693897): 802693897, итого prompt_1 = 2313
2023-11-09 02:22:42,455 - INFO - Создаем программу на основе полученной формы (анкеты), ждем ответ от GPT
2023-11-09 02:22:54,844 - INFO - программа Привет, Егор! Вот твоя индивидуальная программа тренировок:

Разминка:
*1. Прогулка на месте: (5 минут) {Постепенно увеличивай темп, поднимай колени выше, размахивай руками}*
*2. Растяжка ног: (2 повторения по 30 секунд на каждую ногу) {Сядь на пол, вытяни одну ногу вперед, наклонись вперед, стараясь дотянуться до носка}*
*3. Растяжка плеч: (2 повторения по 30 секунд на каждое плечо) {Сядь на пол, согни одну руку в локте, положи другую руку на согнутую руку и потяни ее к груди}*

Основная часть (силовая):
*4. Отжимания: (3 подхода по 10 повторений) {Встань в планку, руки на ширине плеч, медленно опускайся вниз, сгибая локти, затем медленно поднимайся вверх}*
*5. Приседания: (3 подхода по 12 повторений) {Встань прямо, ноги на ширине плеч, медленно сгибай колени, опускаясь вниз, затем медленно поднимайся вверх}*

Заминка:
*6. Растяжка спины: (2 повторения по 30 секунд) {Ляг на пол, согни одну ногу в колене, поверни корпус в сторону согнутой ноги, стараясь дотянуться до пола}*
*7. Растяжка грудных мышц: (2 повторения по 30 секунд) {Встань прямо, согни руки в локтях, положи их на стену или дверной косяк, медленно отведите корпус вперед}*

Обрати внимание, что упражнение "Отжимания" может быть выполнено с осторожностью из-за боли в колене. Если ощущаешь дискомфорт, лучше пропусти это упражнение или замени его на другое.

Подходит ли тебе такая программа тренировок? Если есть что-то, что нужно изменить, напиши, пожалуйста.
2023-11-09 02:23:06,253 - INFO - Ответ от GPT получен, программа готова: Программа тренировок для Егора:

*Разминка:*

*1.Ходьба на месте: (5 минут) {Ходи на месте, поднимая колени не очень высоко, чтобы не нагружать колено. Держи спину прямо и размахивай руками в такт шагам}*

*2.Разминка для рук: (2 подхода, 30 секунд) {Выполняй круговые движения в плечевых суставах, сначала вперед, затем назад}*

*3.Наклоны туловища: (2 подхода, 10 повторений) {Стой прямо, ноги на ширине плеч, мягко наклоняйся в стороны, не делая резких движений}*

*Основная часть:*

*1.Отжимания: (3 подхода, 10-15 повторений) {Прими упор лежа, руки на ширине плеч, тело прямое от головы до пяток. Опускайся, пока грудь почти не коснется пола, затем поднимись. Если есть дискомфорт в колене, выполняй отжимания с колен}*

*2.Планка: (3 подхода, 30-60 секунд) {Ляг на живот, затем поднимись на предплечья и носки ног. Тело должно образовать прямую линию. Держи планку, напрягая мышцы живота и бедер}*

*3.Подъемы туловища: (3 подхода, 15-20 повторений) {Ляг на спину, ноги согнуты в коленях, руки за головой. Поднимай верхнюю часть туловища, напрягая мышцы пресса}*

*4.Приседания на одной ноге (с осторожностью из-за боли в колене): (2 подхода, 8-10 повторений на каждую ногу) {Стань прямо, одну ногу поставь впереди, вторую слегка приподними с пола. Приседай на опорной ноге, другую держи в воздухе. Следи за тем, чтобы колено опорной ноги не выходило за линию носков}*

*Заминка:*

*1.Растяжка квадрицепсов: (2 подхода, 30 секунд на каждую ногу) {Стой прямо, взявшись за стопу, мягко потяни пятку к ягодице, чувствуя растяжение в передней части бедра. Сделай то же самое для другой ноги}*

*2.Растяжка икроножных мышц: (2 подхода, 30 секунд на каждую ногу) {Встань перед стеной, одну ногу поставь впереди, другую позади. Тянись руками к стене, держа пятку задней ноги на полу}*

*3.Поза ребенка: (1 подход, 1 минута) {Сядь на корточки, опусти туловище между ног на пол, руки вытяни перед собой. Расслабься в этой позе}*

Подходит ли тебе эта программа или есть что-то, что ты хотел бы изменить?
2023-11-09 02:23:06,253 - INFO - Считаем текущие токены пользователя (user_id: 802693897): итого prompt_2=4291
2023-11-09 02:23:39,169 - ERROR - Infinity polling: polling exited
2023-11-09 02:23:39,169 - ERROR - Break infinity polling
2023-11-09 02:28:07,643 - ERROR - Infinity polling: polling exited
2023-11-09 02:28:07,644 - ERROR - Break infinity polling
2023-11-09 02:36:56,962 - INFO - Новый пользователь с user_id: 802693897, добавляем его в базу данных и начинаем диалог
2023-11-09 02:36:57,309 - INFO - Для пользователя user_id: 802693897 нет контекста. Создаем контекст и счетчик токенов
2023-11-09 02:36:57,309 - INFO - Задаем system на промпт 1
2023-11-09 02:37:08,044 - INFO - Пользователь отправил текстоовое сообщение
2023-11-09 02:37:08,154 - INFO - Сообщение пользователя (user_id: 802693897): Я Егор, мне 17, хочу отжимания, инвентаря нет, болит колено, хочу тратить 40 минут в день, уровень физической подготовки 10
2023-11-09 02:37:08,154 - INFO - Добавляем полученный текст в контекст пользователя (user_id: 802693897)
2023-11-09 02:37:14,635 - INFO - Получили ответ GPT. Ответ: Твоя анкета:
Имя: Егор
Возраст: 17 лет
Уровень физической подготовки: 10/10
Продолжительность занятия: 40 минут
Физические ограничения: болит колено
Наличие спортивного инвентаря: нет
Пожелания по упражнениям: отжимания

Все верно? Если есть что-то, что нужно исправить, напиши.
2023-11-09 02:37:14,636 - INFO - Считаем токены для пользователя (user_id: 802693897): 802693897, итого prompt_1 = 660
2023-11-09 02:37:14,636 - INFO - Слово тригре в ответе от GPT, выдаем клаваиатуру, если ответ пользователя положительный, переходим к промпту 2
2023-11-09 02:37:17,413 - INFO - Переходим к финальной проверке анкеты пользователя. Ответ пользователя на форму: Да
2023-11-09 02:37:17,414 - INFO - Пользователь (user_id: 802693897) подтвердил корректность анкеты, начианем составлять для него программу
2023-11-09 02:37:17,671 - INFO - Перед составлением программы, получаем заполненую форму пользователя без лишнего текста, для того, чтобы передать ее в промпт 2
2023-11-09 02:37:20,572 - INFO - Получили форму пользователя (user_id: 802693897), форма: Твоя анкета:
Имя: Егор
Пол: Мужской
Возраст: 17 лет
Уровень физической подготовки: 10/10
Продолжительность занятия: 40 минут
Физические ограничения: Болит колено
Наличие спортивного инвентаря: Нет
Пожелания по упражнениям: Отжимания

Все верно? Если есть что-то, что нужно исправить, напиши., передаем ее во 2 промпт
2023-11-09 02:37:20,573 - INFO - Считаем токены для пользователя (user_id: 802693897): 802693897, итого prompt_1 = 1482
2023-11-09 02:37:20,573 - INFO - Создаем программу на основе полученной формы (анкеты), ждем ответ от GPT
2023-11-09 02:37:45,630 - INFO - Ответ от GPT получен, программа готова: *Разминка:*

*1. Прогулка на месте: (3 минуты) {Ходи на месте, поднимая колени высоко и активно махая руками}*

*2. Разминка плеч: (2 подхода, 30 секунд) {Встань прямо, вытяни руки перед собой, затем медленно вращай плечами вперед и назад}*

*3. Боковые наклоны: (2 подхода, 15 повторений) {Встань прямо, ноги на ширине плеч, руки на талии. Наклоняйся в стороны, не наклоняясь вперед или назад}*

*4. Растяжка икры: (2 подхода, 30 секунд на ногу) {Встань перед стеной, одну ногу вытяни назад, касаясь пяткой пола. Другую ногу согни в колене. Тянись руками к стене, чувствуя растяжение в икроножной мышце задней ноги}*

*Основная часть:*

*1. Отжимания: (4 подхода, 15 повторений) {Прими упор лежа, руки на ширине плеч. Опускай тело, сгибая руки в локтях, затем поднимайся обратно. Следи за тем, чтобы тело оставалось прямым}*

*2. Планка: (3 подхода, 1 минута) {Прими упор на предплечьях и носках, тело прямое, как доска. Держи эту позицию}*

*3. Приседания без нагрузки: (3 подхода, 20 повторений) {Встань прямо, ноги на ширине плеч. Приседай, отводя таз назад и держа спину прямой. Следи за тем, чтобы колени не выходили за линию носков. Из-за боли в колене выполняй упражнение с осторожностью}*

*4. Берпи без прыжка: (3 подхода, 10 повторений) {Из положения стоя опустись в присед, затем руками уйди в упор лежа, выполнить отжимание, вернуться в присед и встать. Избегай резких движений из-за боли в колене}*

*Заминка:*

*1. Растяжка квадрицепса: (2 подхода, 30 секунд на ногу) {Встань, ухватившись за стул или стену, согни ногу в колене, удерживая стопу рукой у ягодицы. Чувствуй растяжение в передней части бедра. С осторожностью из-за боли в колене}*

*2. Растяжка грудных мышц: (2 подхода, 30 секунд) {Встань в дверном проеме, руки на стойке на уровне плеч. Сделай небольшой шаг вперед, чувствуя растяжение в грудных мышцах}*

*3. Наклоны к ногам: (2 подхода, 30 секунд) {Сядь на пол, ноги прямо перед собой. Наклонись вперед, стараясь дотянуться руками до носков. Не сгибай колени}*

*4. Растяжка спины: (2 подхода, 30 секунд) {Сядь на корточки, опусти тело между ног, вытяни руки вперед и расслабь спину}*

Егор, подходит ли тебе предложенная программа или есть моменты, которые ты бы хотел изменить?
2023-11-09 02:37:45,631 - INFO - Считаем текущие токены пользователя (user_id: 802693897): итого prompt_2=1909
2023-11-09 02:37:51,525 - INFO - from check_program Да
2023-11-09 02:37:51,632 - INFO - Сохраняем программу для пользователя 802693897
2023-11-09 02:38:00,458 - INFO - программа Привет, Егор! Основываясь на твоей анкете, я составил для тебя индивидуальную программу тренировок дома. Проверь ее и скажи, подходит ли она тебе или есть что-то, что нужно изменить.

Разминка:
*1. Прогулка на месте: (5 минут) {Постепенно увеличивай темп, поднимай колени выше, размахивай руками}*
*2. Растяжка: (5 минут) {Сделай несколько упражнений на растяжку для всех групп мышц}*

Основная часть (силовая):
*3. Отжимания: (3 подхода по 10 повторений) {Поставь руки на ширине плеч, опусти тело до параллели с полом, затем поднимайся вверх}* 
*4. Приседания: (3 подхода по 12 повторений) {Расставь ноги на ширине плеч, опусти таз до параллели с полом, затем вернись в исходное положение}*
*5. Планка: (3 подхода по 30 секунд) {Опрокинься на предплечья и носки, держи тело прямым и напряженным}*

Заминка:
*6. Растяжка: (5 минут) {Сделай несколько упражнений на растяжку для всех групп мышц}*

Обрати внимание, что упражнение "Отжимания" может быть нагрузочным для твоего болеющего колена. Выполняй его с осторожностью и прерывай, если появляется дискомфорт или боль.

Что ты думаешь об этой программе? Подходит ли она тебе или есть что-то, что нужно изменить?
2023-11-09 02:38:20,108 - INFO - error_code=None error_message="'messages' is a required property" error_param=None error_type=invalid_request_error message='OpenAI API error received' stream_error=False
2023-11-09 02:38:20,115 - ERROR - Infinity polling exception: 'messages' is a required property
2023-11-09 02:38:20,119 - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 955, in infinity_polling
    self.polling(non_stop=True, timeout=timeout, long_polling_timeout=long_polling_timeout,
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1043, in polling
    self.__threaded_polling(non_stop=non_stop, interval=interval, timeout=timeout, long_polling_timeout=long_polling_timeout,
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1118, in __threaded_polling
    raise e
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1074, in __threaded_polling
    self.worker_pool.raise_exceptions()
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/util.py", line 147, in raise_exceptions
    raise self.exception_info
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/util.py", line 90, in run
    task(*args, **kwargs)
  File "/Users/ekondrashov/PycharmProjects/openai/main.py", line 307, in check_schedule
    json_schedule = openai.ChatCompletion.create(
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/openai/api_resources/chat_completion.py", line 25, in create
    return super().create(*args, **kwargs)
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/openai/api_resources/abstract/engine_api_resource.py", line 155, in create
    response, _, api_key = requestor.request(
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/openai/api_requestor.py", line 299, in request
    resp, got_stream = self._interpret_response(result, stream)
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/openai/api_requestor.py", line 710, in _interpret_response
    self._interpret_response_line(
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/openai/api_requestor.py", line 775, in _interpret_response_line
    raise self.handle_error_response(
openai.error.InvalidRequestError: 'messages' is a required property

2023-11-09 02:38:53,250 - ERROR - Infinity polling: polling exited
2023-11-09 02:38:53,250 - ERROR - Break infinity polling
2023-11-09 02:39:17,272 - INFO - Новый пользователь с user_id: 802693897, добавляем его в базу данных и начинаем диалог
2023-11-09 02:39:17,555 - INFO - Для пользователя user_id: 802693897 нет контекста. Создаем контекст и счетчик токенов
2023-11-09 02:39:17,555 - INFO - Задаем system на промпт 1
2023-11-09 02:39:20,939 - INFO - Пользователь отправил текстоовое сообщение
2023-11-09 02:39:21,186 - INFO - Сообщение пользователя (user_id: 802693897): Я Егор, мне 17, хочу отжимания, инвентаря нет, болит колено, хочу тратить 40 минут в день, уровень физической подготовки 10
2023-11-09 02:39:21,186 - INFO - Добавляем полученный текст в контекст пользователя (user_id: 802693897)
2023-11-09 02:39:24,068 - INFO - Получили ответ GPT. Ответ: Твоя анкета:
Имя: Егор
Возраст: 17 лет
Уровень физической подготовки: 10/10
Продолжительность занятия: 40 минут
Физические ограничения: Болит колено
Наличие спортивного инвентаря: Нет
Пожелания по упражнениям: Отжимания

Все верно? Если есть что-то, что нужно исправить, напиши.
2023-11-09 02:39:24,069 - INFO - Считаем токены для пользователя (user_id: 802693897): 802693897, итого prompt_1 = 662
2023-11-09 02:39:24,069 - INFO - Слово тригре в ответе от GPT, выдаем клаваиатуру, если ответ пользователя положительный, переходим к промпту 2
2023-11-09 02:39:27,070 - INFO - Переходим к финальной проверке анкеты пользователя. Ответ пользователя на форму: Да
2023-11-09 02:39:27,071 - INFO - Пользователь (user_id: 802693897) подтвердил корректность анкеты, начианем составлять для него программу
2023-11-09 02:39:27,180 - INFO - Перед составлением программы, получаем заполненую форму пользователя без лишнего текста, для того, чтобы передать ее в промпт 2
2023-11-09 02:39:30,415 - INFO - Получили форму пользователя (user_id: 802693897), форма: Твоя анкета:
Имя: Егор
Пол: Мужской
Возраст: 17 лет
Уровень физической подготовки: 10/10
Продолжительность занятия: 40 минут
Физические ограничения: Болит колено
Наличие спортивного инвентаря: Нет
Пожелания по упражнениям: Отжимания

Все верно? Если есть что-то, что нужно исправить, напиши., передаем ее во 2 промпт
2023-11-09 02:39:30,416 - INFO - Считаем токены для пользователя (user_id: 802693897): 802693897, итого prompt_1 = 1486
2023-11-09 02:39:30,416 - INFO - Создаем программу на основе полученной формы (анкеты), ждем ответ от GPT
2023-11-09 02:39:50,076 - INFO - Ответ от GPT получен, программа готова: *Разминка:*

*1. Прогулка на месте: (3 минуты) {Ходи на месте, постепенно увеличивая темп. Работай руками, имитируя бег}*

*2. Разминка плеч: (2 подхода, 30 секунд) {Выполняй круговые движения плечами, сначала вперед, затем назад}*

*3. Разминка запястий: (2 подхода, 30 секунд) {Делай круговые движения запястьями, сначала в одну сторону, затем в другую}*

*Основная часть:*

*1. Отжимания: (4 подхода, 15 повторений) {Прими упор лежа, руки на ширине плеч. Опускай тело до угла в локтях около 90 градусов, затем поднимайся. Следи за тем, чтобы спина оставалась прямой}*

*2. Планка: (3 подхода, 1 минута) {Прими упор на предплечьях и носках, тело должно образовывать прямую линию. Задержись в этой позиции}*

*3. Берпи: (3 подхода, 10 повторений) {Из положения стоя прыгни в упор лежа, сделай отжимание, вернись в прыжке в исходное положение и прыгни вверх, поднимая руки над головой} {с осторожностью из-за боли в колене}*

*4. Подъемы туловища: (3 подхода, 20 повторений) {Ляг на спину, руки за головой. Поднимай верхнюю часть туловища к коленям, затем опускайся}*

*Заминка:*

*1. Растяжка грудных мышц: (2 подхода, 30 секунд) {Встань в дверной проем, руки на уровне плеч, ладони на косяке. Шагни вперед одной ногой и наклонись вперед, чувствуя растяжение в грудных мышцах}*

*2. Растяжка бедер: (2 подхода, по 30 секунд на каждую ногу) {Встань, возьмись за стул или стену для устойчивости. Согни одну ногу в колене, возьмись за стопу рукой и потяни пятку к ягодицам, чувствуя растяжение в передней части бедра}*

*3. Растяжка икроножных мышц: (2 подхода, по 30 секунд на каждую ногу) {Встань перед стеной, одну ногу поставь вперед, другую назад. Держа пятку задней ноги на полу, наклонись вперед, чувствуя растяжение в икроножной мышце}*

Эта программа подходит? Что можно изменить?
2023-11-09 02:39:50,077 - INFO - Считаем текущие токены пользователя (user_id: 802693897): итого prompt_2=1683
2023-11-09 02:39:51,575 - INFO - from check_program Да
2023-11-09 02:39:51,709 - INFO - Сохраняем программу для пользователя 802693897
2023-11-09 02:40:00,828 - INFO - программа Привет, Егор! Основываясь на твоей анкете, я составил для тебя индивидуальную программу тренировок дома. Проверь ее и скажи, подходит ли она тебе или есть что-то, что нужно изменить.

Разминка:
*1. Прогулка на месте: (5 минут) {Постепенно увеличивай темп, поднимай колени выше, размахивай руками}*
*2. Растяжка: (5 минут) {Сделай несколько упражнений на растяжку для всех групп мышц}*

Основная часть (силовая):
*3. Отжимания: (3 подхода по 10 повторений) {Поставь руки на ширине плеч, опусти грудь к полу, затем поднимайся вверх}* 
*4. Приседания: (3 подхода по 12 повторений) {Расставь ноги на ширине плеч, опустиясь вниз, сохраняй спину прямой, затем поднимайся вверх}* 
*5. Планка: (3 подхода по 30 секунд) {Опройся на предплечья и носки, сохраняй прямую линию от головы до пяток}* 

Заминка:
*6. Растяжка: (5 минут) {Сделай несколько упражнений на растяжку для всех групп мышц}*

Обрати внимание, что упражнение "Отжимания" может быть нагрузкой на твое больное колено. Выполняй его с осторожностью и прекрати, если почувствуешь дискомфорт или боль.

Что ты думаешь об этой программе? Подходит ли она тебе или есть что-то, что нужно изменить?
2023-11-09 02:40:06,969 - INFO - {
  "schedule": [
    {
      "dayOfWeek": "Вторник",
      "time": "16:25"
    },
    {
      "dayOfWeek": "Пятница",
      "time": "14:30"
    }
  ]
}
2023-11-09 02:42:11,061 - ERROR - Infinity polling: polling exited
2023-11-09 02:42:11,061 - ERROR - Break infinity polling
2023-11-09 03:06:55,611 - INFO - Новый пользователь с user_id: 802693897, добавляем его в базу данных и начинаем диалог
2023-11-09 03:06:55,845 - INFO - Для пользователя user_id: 802693897 нет контекста. Создаем контекст и счетчик токенов
2023-11-09 03:06:55,846 - INFO - Задаем system на промпт 1
2023-11-09 03:07:01,019 - INFO - Пользователь отправил текстоовое сообщение
2023-11-09 03:07:01,279 - INFO - Сообщение пользователя (user_id: 802693897): Я Егор, мне 17, хочу отжимания, инвентаря нет, болит колено, хочу тратить 40 минут в день, уровень физической подготовки 10
2023-11-09 03:07:01,279 - INFO - Добавляем полученный текст в контекст пользователя (user_id: 802693897)
2023-11-09 03:07:05,074 - INFO - Получили ответ GPT. Ответ: Твоя анкета:
Имя: Егор
Возраст: 17 лет
Пол: Мужской
Уровень физической подготовки: 10/10
Продолжительность занятия: 40 минут
Физические ограничения: Болит колено
Наличие спортивного инвентаря: Нет
Пожелания по упражнениям: Отжимания

Все верно? Если есть что-то, что нужно исправить, напиши, пожалуйста.
2023-11-09 03:07:05,075 - INFO - Считаем токены для пользователя (user_id: 802693897): 802693897, итого prompt_1 = 677
2023-11-09 03:07:05,075 - INFO - Слово тригре в ответе от GPT, выдаем клаваиатуру, если ответ пользователя положительный, переходим к промпту 2
2023-11-09 03:07:06,449 - INFO - Переходим к финальной проверке анкеты пользователя. Ответ пользователя на форму: Да
2023-11-09 03:07:06,450 - INFO - Пользователь (user_id: 802693897) подтвердил корректность анкеты, начианем составлять для него программу
2023-11-09 03:07:06,557 - INFO - Перед составлением программы, получаем заполненую форму пользователя без лишнего текста, для того, чтобы передать ее в промпт 2
2023-11-09 03:07:09,110 - INFO - json form {'profile': {'name': 'Егор', 'sex': 'Мужской', 'age': 17, 'level': 10, 'duration': 40, 'issues': 'Болит колено', 'equipment': 'Нет', 'wishes': 'Отжимания'}}
2023-11-09 03:07:09,114 - ERROR - Infinity polling exception: 'schedule'
2023-11-09 03:07:09,118 - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 955, in infinity_polling
    self.polling(non_stop=True, timeout=timeout, long_polling_timeout=long_polling_timeout,
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1043, in polling
    self.__threaded_polling(non_stop=non_stop, interval=interval, timeout=timeout, long_polling_timeout=long_polling_timeout,
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1118, in __threaded_polling
    raise e
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1074, in __threaded_polling
    self.worker_pool.raise_exceptions()
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/util.py", line 147, in raise_exceptions
    raise self.exception_info
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/util.py", line 90, in run
    task(*args, **kwargs)
  File "/Users/ekondrashov/PycharmProjects/openai/main.py", line 213, in final_check_form
    BotDatabase.insert_json_format(message.from_user.id, json_form)
  File "/Users/ekondrashov/PycharmProjects/openai/database.py", line 50, in insert_json_format
    for weekday in schedule["schedule"]:
KeyError: 'schedule'

2023-11-09 03:08:05,230 - ERROR - Infinity polling: polling exited
2023-11-09 03:08:05,233 - ERROR - Break infinity polling
2023-11-09 03:21:50,832 - INFO - Новый пользователь с user_id: 802693897, добавляем его в базу данных и начинаем диалог
2023-11-09 03:21:50,846 - ERROR - Infinity polling exception: 2 values for 1 columns
2023-11-09 03:21:50,849 - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 955, in infinity_polling
    self.polling(non_stop=True, timeout=timeout, long_polling_timeout=long_polling_timeout,
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1043, in polling
    self.__threaded_polling(non_stop=non_stop, interval=interval, timeout=timeout, long_polling_timeout=long_polling_timeout,
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1118, in __threaded_polling
    raise e
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1074, in __threaded_polling
    self.worker_pool.raise_exceptions()
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/util.py", line 147, in raise_exceptions
    raise self.exception_info
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/util.py", line 90, in run
    task(*args, **kwargs)
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 6801, in _run_middlewares_and_handler
    result = handler['function'](message)
  File "/Users/ekondrashov/PycharmProjects/openai/main.py", line 51, in main
    BotDatabase.add_user(message.from_user.id)
  File "/Users/ekondrashov/PycharmProjects/openai/database.py", line 14, in add_user
    self.cur.execute("INSERT INTO `users` (`user_id`) VALUES (?, ?)", (user_id,))
sqlite3.OperationalError: 2 values for 1 columns

2023-11-09 03:22:00,023 - ERROR - Infinity polling: polling exited
2023-11-09 03:22:00,024 - ERROR - Break infinity polling
2023-11-09 03:22:03,791 - INFO - Новый пользователь с user_id: 802693897, добавляем его в базу данных и начинаем диалог
2023-11-09 03:22:04,037 - INFO - Для пользователя user_id: 802693897 нет контекста. Создаем контекст и счетчик токенов
2023-11-09 03:22:04,037 - INFO - Задаем system на промпт 1
2023-11-09 03:22:07,853 - INFO - Пользователь отправил текстоовое сообщение
2023-11-09 03:22:08,126 - INFO - Сообщение пользователя (user_id: 802693897): Я Егор, мне 17, хочу отжимания, инвентаря нет, болит колено, хочу тратить 40 минут в день, уровень физической подготовки 10
2023-11-09 03:22:08,126 - INFO - Добавляем полученный текст в контекст пользователя (user_id: 802693897)
2023-11-09 03:22:11,200 - INFO - Получили ответ GPT. Ответ: Твоя анкета:
Имя: Егор
Возраст: 17
Уровень физической подготовки: 10
Продолжительность занятия: 40 минут
Физические ограничения: болит колено
Наличие спортивного инвентаря: нет
Пожелания по упражнениям: отжимания

Все верно? Если есть что-то, что нужно исправить, напиши.
2023-11-09 03:22:11,200 - INFO - Считаем токены для пользователя (user_id: 802693897): 802693897, итого prompt_1 = 656
2023-11-09 03:22:11,200 - INFO - Слово тригре в ответе от GPT, выдаем клаваиатуру, если ответ пользователя положительный, переходим к промпту 2
2023-11-09 03:22:15,270 - INFO - Переходим к финальной проверке анкеты пользователя. Ответ пользователя на форму: Да
2023-11-09 03:22:15,271 - INFO - Пользователь (user_id: 802693897) подтвердил корректность анкеты, начианем составлять для него программу
2023-11-09 03:22:15,362 - INFO - Перед составлением программы, получаем заполненую json форму пользователя без лишнего текста, для того, чтобы передать ее в промпт 2
2023-11-09 03:22:17,757 - INFO - json form {'profile': {'name': 'Егор', 'sex': 'мужской', 'age': 17, 'level': 10, 'duration': 40, 'issues': 'болит колено', 'equipment': 'нет', 'wishes': 'отжимания'}}
2023-11-09 03:22:17,759 - INFO - Получили форму пользователя (user_id: 802693897), форма: {
  "profile": {
    "name": "Егор",
    "sex": "мужской",
    "age": 17,
    "level": 10,
    "duration": 40,
    "issues": "болит колено",
    "equipment": "нет",
    "wishes": "отжимания"
  }
}, передаем ее во 2 промпт
2023-11-09 03:22:17,759 - INFO - Считаем токены для пользователя (user_id: 802693897): 802693897, итого prompt_1 = 1462
2023-11-09 03:22:17,759 - INFO - Создаем программу на основе полученной формы (анкеты), ждем ответ от GPT
2023-11-09 03:22:30,247 - INFO - Ответ от GPT получен, программа готова: Твоя программа тренировки:

**Разминка (5-10 минут):**
1. Маршировка на месте - 2 минуты.
2. Подъемы рук вверх с глубоким вдохом и опускание с выдохом - 15 повторений.
3. Разведение рук в стороны с поворотами туловища - 20 повторений.
4. Наклоны туловища в стороны - 20 повторений.

**Основная часть:**
1. Отжимания (учитывая, что у тебя болит колено, делай отжимания на кулаках, чтобы уменьшить нагрузку на запястья и не приседай глубоко, чтобы избежать давления на колени) - 4 подхода по 20 повторений.
2. Планка (не делай классическую планку на прямых руках, чтобы не нагружать колени, выбери вариант на предплечьях) - 4 подхода по 1 минуте.
3. Обратные отжимания от стула (для тренировки трицепсов и спины, следи за положением колен, чтобы не вызвать боль) - 4 подхода по 15 повторений.
4. Приседания на одной ноге (пистолетики) - 3 подхода по 10 повторений на каждую ногу (если ощущаешь боль в колене, прекрати выполнение).

**Заминка (5-10 минут):**
1. Потягивание в положении сидя, ноги прямо, тянемся руками к носкам - 30 секунд.
2. Растяжка икроножных мышц - по 30 секунд на каждую ногу.
3. Растяжка бедра в положении стоя, сгибаем одну ногу и тянем пятку к ягодицам - по 30 секунд на каждую ногу.
4. Глубокое дыхание с расслаблением мышц - 2 минуты.

Подходит ли тебе эта программа или есть пункты, которые ты хотел бы изменить?
2023-11-09 03:22:30,247 - INFO - Считаем текущие токены пользователя (user_id: 802693897): итого prompt_2=1180
2023-11-09 03:22:35,862 - INFO - from check_program Да
2023-11-09 03:22:35,976 - INFO - Сохраняем программу для пользователя 802693897
2023-11-09 03:22:49,191 - INFO - json prog: {
  "training": {
    "Разминка": [
      {
        "Упражнение 1": "Растяжка грудных мышц",
        "Подходы": 1,
        "Повторения/Время": "15-20 секунд"
      },
      {
        "Упражнение 2": "Разминка шеи",
        "Подходы": 1,
        "Повторения/Время": "10-15 секунд"
      },
      {
        "Упражнение 3": "Разминка плеч",
        "Подходы": 1,
        "Повторения/Время": "10-15 секунд"
      },
      {
        "Упражнение 4": "Разминка спины",
        "Подходы": 1,
        "Повторения/Время": "10-15 секунд"
      }
    ],
    "Основная часть": [
      {
        "Упражнение 1": "Приседания",
        "Подходы": 3,
        "Повторения/Время": "12-15 повторений"
      },
      {
        "Упражнение 2": "Отжимания",
        "Подходы": 3,
        "Повторения/Время": "10-12 повторений"
      },
      {
        "Упражнение 3": "Планка",
        "Подходы": 3,
        "Повторения/Время": "30-45 секунд"
      },
      {
        "Упражнение 4": "Пресс",
        "Подходы": 3,
        "Повторения/Время": "15-20 повторений"
      }
    ],
    "Заминка": [
      {
        "Упражнение 1": "Растяжка ног",
        "Подходы": 1,
        "Повторения/Время": "15-20 секунд"
      },
      {
        "Упражнение 2": "Растяжка спины",
        "Подходы": 1,
        "Повторения/Время": "15-20 секунд"
      },
      {
        "Упражнение 3": "Растяжка плеч",
        "Подходы": 1,
        "Повторения/Время": "15-20 секунд"
      },
      {
        "Упражнение 4": "Растяжка шеи",
        "Подходы": 1,
        "Повторения/Время": "15-20 секунд"
      }
    ]
  }
}
2023-11-09 03:22:59,699 - ERROR - Infinity polling: polling exited
2023-11-09 03:22:59,699 - ERROR - Break infinity polling
