2023-11-10 00:08:55,405 - INFO - Новый пользователь с user_id: 940032081, добавляем его в базу данных и начинаем диалог
2023-11-10 00:08:55,626 - INFO - Для пользователя user_id: 940032081 нет контекста. Создаем контекст и счетчик токенов
2023-11-10 00:08:55,627 - INFO - Задаем system на промпт 1
2023-11-10 00:09:04,135 - INFO - Получаем упраженения из бд для пользователя 802693897
2023-11-10 00:09:04,136 - INFO - Получили упражнения пользователя, из количество - 3, упражнения - [['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой'], ['Отжимания - 5 подходов по 20 повторений', ' Планка - 4 подхода по 1 минуте', ' Берпи - 4 подхода по 15 повторений', ' Отжимания с узкой постановкой рук (для трицепсов) - 4 подхода по 15 повторений'], ['Растяжка квадрицепсов - по 1 минуте на каждую ногу', ' Растяжка грудных мышц - 2 подхода по 30 секунд', ' Растяжка трицепсов - по 30 секунд на каждую руку', ' Дыхательные упражнения - 3 минуты']]
2023-11-10 00:09:07,188 - INFO - Я выполнил упражнение
2023-11-10 00:09:08,524 - INFO - Пропустить отдых, 1, [['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой'], ['Отжимания - 5 подходов по 20 повторений', ' Планка - 4 подхода по 1 минуте', ' Берпи - 4 подхода по 15 повторений', ' Отжимания с узкой постановкой рук (для трицепсов) - 4 подхода по 15 повторений'], ['Растяжка квадрицепсов - по 1 минуте на каждую ногу', ' Растяжка грудных мышц - 2 подхода по 30 секунд', ' Растяжка трицепсов - по 30 секунд на каждую руку', ' Дыхательные упражнения - 3 минуты']]
2023-11-10 00:09:12,242 - INFO - Я выполнил упражнение
2023-11-10 00:09:13,516 - INFO - Пропустить отдых, 2, [['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой'], ['Отжимания - 5 подходов по 20 повторений', ' Планка - 4 подхода по 1 минуте', ' Берпи - 4 подхода по 15 повторений', ' Отжимания с узкой постановкой рук (для трицепсов) - 4 подхода по 15 повторений'], ['Растяжка квадрицепсов - по 1 минуте на каждую ногу', ' Растяжка грудных мышц - 2 подхода по 30 секунд', ' Растяжка трицепсов - по 30 секунд на каждую руку', ' Дыхательные упражнения - 3 минуты']]
2023-11-10 00:09:14,931 - INFO - Я выполнил упражнение
2023-11-10 00:09:16,462 - INFO - Пропустить отдых, 3, [['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой'], ['Отжимания - 5 подходов по 20 повторений', ' Планка - 4 подхода по 1 минуте', ' Берпи - 4 подхода по 15 повторений', ' Отжимания с узкой постановкой рук (для трицепсов) - 4 подхода по 15 повторений'], ['Растяжка квадрицепсов - по 1 минуте на каждую ногу', ' Растяжка грудных мышц - 2 подхода по 30 секунд', ' Растяжка трицепсов - по 30 секунд на каждую руку', ' Дыхательные упражнения - 3 минуты']]
2023-11-10 00:09:24,709 - ERROR - Infinity polling: polling exited
2023-11-10 00:09:24,709 - ERROR - Break infinity polling
2023-11-10 00:13:24,014 - INFO - Получаем упраженения из бд для пользователя 802693897
2023-11-10 00:13:24,016 - INFO - Получили упражнения пользователя, из количество - 3, упражнения - [['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой'], ['Отжимания - 5 подходов по 20 повторений', ' Планка - 4 подхода по 1 минуте', ' Берпи - 4 подхода по 15 повторений', ' Отжимания с узкой постановкой рук (для трицепсов) - 4 подхода по 15 повторений'], ['Растяжка квадрицепсов - по 1 минуте на каждую ногу', ' Растяжка грудных мышц - 2 подхода по 30 секунд', ' Растяжка трицепсов - по 30 секунд на каждую руку', ' Дыхательные упражнения - 3 минуты']]
2023-11-10 00:22:43,618 - ERROR - Infinity polling: polling exited
2023-11-10 00:22:43,618 - ERROR - Break infinity polling
2023-11-10 00:22:49,130 - INFO - Получаем упраженения из бд для пользователя 802693897
2023-11-10 00:22:49,131 - INFO - Получили упражнения пользователя, из количество - 3, упражнения - [['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой'], ['Отжимания - 5 подходов по 20 повторений', ' Планка - 4 подхода по 1 минуте', ' Берпи - 4 подхода по 15 повторений', ' Отжимания с узкой постановкой рук (для трицепсов) - 4 подхода по 15 повторений'], ['Растяжка квадрицепсов - по 1 минуте на каждую ногу', ' Растяжка грудных мышц - 2 подхода по 30 секунд', ' Растяжка трицепсов - по 30 секунд на каждую руку', ' Дыхательные упражнения - 3 минуты']]
2023-11-10 00:23:01,062 - ERROR - Infinity polling: polling exited
2023-11-10 00:23:01,062 - ERROR - Break infinity polling
2023-11-10 00:23:04,754 - INFO - Получаем упраженения из бд для пользователя 802693897
2023-11-10 00:23:04,755 - INFO - Получили упражнения пользователя, из количество - 4, упражнения - ['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой']
2023-11-10 00:23:26,932 - INFO - Я выполнил упражнение
2023-11-10 00:23:28,911 - INFO - Пропустить отдых, 1, ['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой']
2023-11-10 00:23:30,644 - INFO - Я выполнил упражнение
2023-11-10 00:23:31,547 - INFO - Пропустить отдых, 2, ['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой']
2023-11-10 00:23:32,854 - INFO - Я выполнил упражнение
2023-11-10 00:23:33,790 - INFO - Пропустить отдых, 3, ['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой']
2023-11-10 00:24:13,741 - INFO - Я выполнил упражнение
2023-11-10 00:24:14,718 - INFO - Пропустить отдых, 4, ['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой']
2023-11-10 00:26:16,438 - ERROR - Infinity polling: polling exited
2023-11-10 00:26:16,438 - ERROR - Break infinity polling
2023-11-10 00:27:58,820 - ERROR - Infinity polling: polling exited
2023-11-10 00:27:58,820 - ERROR - Break infinity polling
2023-11-10 00:28:07,063 - INFO - Получаем упраженения из бд для пользователя 802693897
2023-11-10 00:28:07,064 - INFO - Получили упражнения пользователя, из количество - 4, упражнения - ['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой']
2023-11-10 00:28:08,718 - INFO - Я выполнил упражнение
2023-11-10 00:28:09,761 - INFO - Пропустить отдых, 1, ['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой']
2023-11-10 00:28:09,763 - ERROR - Infinity polling exception: len() takes exactly one argument (0 given)
2023-11-10 00:28:09,771 - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 955, in infinity_polling
    self.polling(non_stop=True, timeout=timeout, long_polling_timeout=long_polling_timeout,
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1043, in polling
    self.__threaded_polling(non_stop=non_stop, interval=interval, timeout=timeout, long_polling_timeout=long_polling_timeout,
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1118, in __threaded_polling
    raise e
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1074, in __threaded_polling
    self.worker_pool.raise_exceptions()
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/util.py", line 147, in raise_exceptions
    raise self.exception_info
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/util.py", line 90, in run
    task(*args, **kwargs)
  File "/Users/ekondrashov/PycharmProjects/openai/main.py", line 379, in next_exercise
    if n == len():
TypeError: len() takes exactly one argument (0 given)

2023-11-10 00:28:19,344 - ERROR - Infinity polling: polling exited
2023-11-10 00:28:19,344 - ERROR - Break infinity polling
2023-11-10 00:28:35,439 - ERROR - Infinity polling: polling exited
2023-11-10 00:28:35,439 - ERROR - Break infinity polling
2023-11-10 00:28:37,974 - INFO - Получаем упраженения из бд для пользователя 802693897
2023-11-10 00:28:37,974 - INFO - Получили упражнения пользователя, из количество - 4, упражнения - ['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой']
2023-11-10 00:28:38,766 - INFO - Я выполнил упражнение
2023-11-10 00:28:39,649 - INFO - Пропустить отдых, 1, ['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой']
2023-11-10 00:28:40,512 - INFO - Я выполнил упражнение
2023-11-10 00:28:41,218 - INFO - Пропустить отдых, 2, ['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой']
2023-11-10 00:28:41,889 - INFO - Я выполнил упражнение
2023-11-10 00:28:42,631 - INFO - Пропустить отдых, 3, ['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой']
2023-11-10 00:28:43,578 - INFO - Я выполнил упражнение
2023-11-10 00:28:44,549 - INFO - Пропустить отдых, 4, ['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой']
2023-11-10 00:28:44,550 - ERROR - Infinity polling exception: list index out of range
2023-11-10 00:28:44,553 - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 955, in infinity_polling
    self.polling(non_stop=True, timeout=timeout, long_polling_timeout=long_polling_timeout,
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1043, in polling
    self.__threaded_polling(non_stop=non_stop, interval=interval, timeout=timeout, long_polling_timeout=long_polling_timeout,
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1118, in __threaded_polling
    raise e
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1074, in __threaded_polling
    self.worker_pool.raise_exceptions()
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/util.py", line 147, in raise_exceptions
    raise self.exception_info
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/util.py", line 90, in run
    task(*args, **kwargs)
  File "/Users/ekondrashov/PycharmProjects/openai/main.py", line 384, in next_exercise
    next = bot.send_message(message.chat.id, f"Упражнение {exercises[n]}", reply_markup=markup_keyboard_exercises)
IndexError: list index out of range

2023-11-10 00:29:23,032 - ERROR - Infinity polling: polling exited
2023-11-10 00:29:23,033 - ERROR - Break infinity polling
2023-11-10 00:29:32,424 - INFO - Получаем упраженения из бд для пользователя 802693897
2023-11-10 00:29:32,425 - INFO - Получили упражнения пользователя, из количество - 4, упражнения - ['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой']
2023-11-10 00:29:33,314 - INFO - Я выполнил упражнение
2023-11-10 00:29:34,964 - INFO - Пропустить отдых, 1, ['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой']
2023-11-10 00:29:35,697 - INFO - Я выполнил упражнение
2023-11-10 00:29:36,291 - INFO - Пропустить отдых, 2, ['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой']
2023-11-10 00:29:36,927 - INFO - Я выполнил упражнение
2023-11-10 00:29:37,639 - INFO - Пропустить отдых, 3, ['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой']
2023-11-10 00:29:38,407 - INFO - Я выполнил упражнение
2023-11-10 00:29:39,111 - INFO - Пропустить отдых, 4, ['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой']
2023-11-10 00:29:39,114 - ERROR - Infinity polling exception: list index out of range
2023-11-10 00:29:39,118 - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 955, in infinity_polling
    self.polling(non_stop=True, timeout=timeout, long_polling_timeout=long_polling_timeout,
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1043, in polling
    self.__threaded_polling(non_stop=non_stop, interval=interval, timeout=timeout, long_polling_timeout=long_polling_timeout,
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1118, in __threaded_polling
    raise e
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1074, in __threaded_polling
    self.worker_pool.raise_exceptions()
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/util.py", line 147, in raise_exceptions
    raise self.exception_info
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/util.py", line 90, in run
    task(*args, **kwargs)
  File "/Users/ekondrashov/PycharmProjects/openai/main.py", line 385, in next_exercise
    next = bot.send_message(message.chat.id, f"Упражнение {exercises[n]}", reply_markup=markup_keyboard_exercises)
IndexError: list index out of range

2023-11-10 00:45:11,523 - ERROR - Infinity polling: polling exited
2023-11-10 00:45:11,523 - ERROR - Break infinity polling
2023-11-10 00:45:19,576 - INFO - Получаем упраженения из бд для пользователя 802693897
2023-11-10 00:45:19,576 - INFO - Получили упражнения пользователя, из количество - 3, упражнения - [['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой'], ['Отжимания - 5 подходов по 20 повторений', ' Планка - 4 подхода по 1 минуте', ' Берпи - 4 подхода по 15 повторений', ' Отжимания с узкой постановкой рук (для трицепсов) - 4 подхода по 15 повторений'], ['Растяжка квадрицепсов - по 1 минуте на каждую ногу', ' Растяжка грудных мышц - 2 подхода по 30 секунд', ' Растяжка трицепсов - по 30 секунд на каждую руку', ' Дыхательные упражнения - 3 минуты']]
2023-11-10 00:45:24,485 - INFO - Я выполнил упражнение
2023-11-10 00:46:43,504 - INFO - Пропустить отдых, 1, 0, [['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой'], ['Отжимания - 5 подходов по 20 повторений', ' Планка - 4 подхода по 1 минуте', ' Берпи - 4 подхода по 15 повторений', ' Отжимания с узкой постановкой рук (для трицепсов) - 4 подхода по 15 повторений'], ['Растяжка квадрицепсов - по 1 минуте на каждую ногу', ' Растяжка грудных мышц - 2 подхода по 30 секунд', ' Растяжка трицепсов - по 30 секунд на каждую руку', ' Дыхательные упражнения - 3 минуты']]
2023-11-10 00:46:44,941 - ERROR - Infinity polling exception: check_ex() missing 1 required positional argument: 'n2'
2023-11-10 00:46:44,946 - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 955, in infinity_polling
    self.polling(non_stop=True, timeout=timeout, long_polling_timeout=long_polling_timeout,
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1043, in polling
    self.__threaded_polling(non_stop=non_stop, interval=interval, timeout=timeout, long_polling_timeout=long_polling_timeout,
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1118, in __threaded_polling
    raise e
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1074, in __threaded_polling
    self.worker_pool.raise_exceptions()
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/util.py", line 147, in raise_exceptions
    raise self.exception_info
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/util.py", line 90, in run
    task(*args, **kwargs)
TypeError: check_ex() missing 1 required positional argument: 'n2'

2023-11-10 00:47:05,929 - ERROR - Infinity polling: polling exited
2023-11-10 00:47:05,929 - ERROR - Break infinity polling
2023-11-10 00:47:08,970 - INFO - Получаем упраженения из бд для пользователя 802693897
2023-11-10 00:47:08,971 - INFO - Получили упражнения пользователя, из количество - 3, упражнения - [['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой'], ['Отжимания - 5 подходов по 20 повторений', ' Планка - 4 подхода по 1 минуте', ' Берпи - 4 подхода по 15 повторений', ' Отжимания с узкой постановкой рук (для трицепсов) - 4 подхода по 15 повторений'], ['Растяжка квадрицепсов - по 1 минуте на каждую ногу', ' Растяжка грудных мышц - 2 подхода по 30 секунд', ' Растяжка трицепсов - по 30 секунд на каждую руку', ' Дыхательные упражнения - 3 минуты']]
2023-11-10 00:47:10,231 - INFO - Я выполнил упражнение
2023-11-10 00:47:11,358 - INFO - Пропустить отдых, 1, 0, [['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой'], ['Отжимания - 5 подходов по 20 повторений', ' Планка - 4 подхода по 1 минуте', ' Берпи - 4 подхода по 15 повторений', ' Отжимания с узкой постановкой рук (для трицепсов) - 4 подхода по 15 повторений'], ['Растяжка квадрицепсов - по 1 минуте на каждую ногу', ' Растяжка грудных мышц - 2 подхода по 30 секунд', ' Растяжка трицепсов - по 30 секунд на каждую руку', ' Дыхательные упражнения - 3 минуты']]
2023-11-10 00:47:13,816 - INFO - Я выполнил упражнение
2023-11-10 00:47:16,238 - INFO - Пропустить отдых, 2, 0, [['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой'], ['Отжимания - 5 подходов по 20 повторений', ' Планка - 4 подхода по 1 минуте', ' Берпи - 4 подхода по 15 повторений', ' Отжимания с узкой постановкой рук (для трицепсов) - 4 подхода по 15 повторений'], ['Растяжка квадрицепсов - по 1 минуте на каждую ногу', ' Растяжка грудных мышц - 2 подхода по 30 секунд', ' Растяжка трицепсов - по 30 секунд на каждую руку', ' Дыхательные упражнения - 3 минуты']]
2023-11-10 00:47:17,401 - INFO - Я выполнил упражнение
2023-11-10 00:47:18,628 - INFO - Пропустить отдых, 3, 0, [['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой'], ['Отжимания - 5 подходов по 20 повторений', ' Планка - 4 подхода по 1 минуте', ' Берпи - 4 подхода по 15 повторений', ' Отжимания с узкой постановкой рук (для трицепсов) - 4 подхода по 15 повторений'], ['Растяжка квадрицепсов - по 1 минуте на каждую ногу', ' Растяжка грудных мышц - 2 подхода по 30 секунд', ' Растяжка трицепсов - по 30 секунд на каждую руку', ' Дыхательные упражнения - 3 минуты']]
2023-11-10 00:47:24,363 - INFO - Я выполнил упражнение
2023-11-10 00:47:26,400 - INFO - Пропустить отдых, 4, 1, [['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой'], ['Отжимания - 5 подходов по 20 повторений', ' Планка - 4 подхода по 1 минуте', ' Берпи - 4 подхода по 15 повторений', ' Отжимания с узкой постановкой рук (для трицепсов) - 4 подхода по 15 повторений'], ['Растяжка квадрицепсов - по 1 минуте на каждую ногу', ' Растяжка грудных мышц - 2 подхода по 30 секунд', ' Растяжка трицепсов - по 30 секунд на каждую руку', ' Дыхательные упражнения - 3 минуты']]
2023-11-10 00:47:26,404 - ERROR - Infinity polling exception: list index out of range
2023-11-10 00:47:26,408 - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 955, in infinity_polling
    self.polling(non_stop=True, timeout=timeout, long_polling_timeout=long_polling_timeout,
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1043, in polling
    self.__threaded_polling(non_stop=non_stop, interval=interval, timeout=timeout, long_polling_timeout=long_polling_timeout,
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1118, in __threaded_polling
    raise e
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1074, in __threaded_polling
    self.worker_pool.raise_exceptions()
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/util.py", line 147, in raise_exceptions
    raise self.exception_info
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/util.py", line 90, in run
    task(*args, **kwargs)
  File "/Users/ekondrashov/PycharmProjects/openai/main.py", line 386, in next_exercise
    next = bot.send_message(message.chat.id, f"Упражнение {exercises[n2][n]}", reply_markup=markup_keyboard_exercises)
IndexError: list index out of range

2023-11-10 00:47:44,517 - ERROR - Infinity polling: polling exited
2023-11-10 00:47:44,517 - ERROR - Break infinity polling
2023-11-10 00:47:47,087 - INFO - Получаем упраженения из бд для пользователя 802693897
2023-11-10 00:47:47,088 - INFO - Получили упражнения пользователя, из количество - 3, упражнения - [['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой'], ['Отжимания - 5 подходов по 20 повторений', ' Планка - 4 подхода по 1 минуте', ' Берпи - 4 подхода по 15 повторений', ' Отжимания с узкой постановкой рук (для трицепсов) - 4 подхода по 15 повторений'], ['Растяжка квадрицепсов - по 1 минуте на каждую ногу', ' Растяжка грудных мышц - 2 подхода по 30 секунд', ' Растяжка трицепсов - по 30 секунд на каждую руку', ' Дыхательные упражнения - 3 минуты']]
2023-11-10 00:47:47,836 - INFO - Я выполнил упражнение
2023-11-10 00:47:48,584 - INFO - Пропустить отдых, 1, 0, [['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой'], ['Отжимания - 5 подходов по 20 повторений', ' Планка - 4 подхода по 1 минуте', ' Берпи - 4 подхода по 15 повторений', ' Отжимания с узкой постановкой рук (для трицепсов) - 4 подхода по 15 повторений'], ['Растяжка квадрицепсов - по 1 минуте на каждую ногу', ' Растяжка грудных мышц - 2 подхода по 30 секунд', ' Растяжка трицепсов - по 30 секунд на каждую руку', ' Дыхательные упражнения - 3 минуты']]
2023-11-10 00:47:49,206 - INFO - Я выполнил упражнение
2023-11-10 00:47:49,869 - INFO - Пропустить отдых, 2, 0, [['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой'], ['Отжимания - 5 подходов по 20 повторений', ' Планка - 4 подхода по 1 минуте', ' Берпи - 4 подхода по 15 повторений', ' Отжимания с узкой постановкой рук (для трицепсов) - 4 подхода по 15 повторений'], ['Растяжка квадрицепсов - по 1 минуте на каждую ногу', ' Растяжка грудных мышц - 2 подхода по 30 секунд', ' Растяжка трицепсов - по 30 секунд на каждую руку', ' Дыхательные упражнения - 3 минуты']]
2023-11-10 00:47:50,695 - INFO - Я выполнил упражнение
2023-11-10 00:47:51,474 - INFO - Пропустить отдых, 3, 0, [['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой'], ['Отжимания - 5 подходов по 20 повторений', ' Планка - 4 подхода по 1 минуте', ' Берпи - 4 подхода по 15 повторений', ' Отжимания с узкой постановкой рук (для трицепсов) - 4 подхода по 15 повторений'], ['Растяжка квадрицепсов - по 1 минуте на каждую ногу', ' Растяжка грудных мышц - 2 подхода по 30 секунд', ' Растяжка трицепсов - по 30 секунд на каждую руку', ' Дыхательные упражнения - 3 минуты']]
2023-11-10 00:47:52,286 - INFO - Я выполнил упражнение
2023-11-10 00:47:53,177 - INFO - Пропустить отдых, 0, 1, [['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой'], ['Отжимания - 5 подходов по 20 повторений', ' Планка - 4 подхода по 1 минуте', ' Берпи - 4 подхода по 15 повторений', ' Отжимания с узкой постановкой рук (для трицепсов) - 4 подхода по 15 повторений'], ['Растяжка квадрицепсов - по 1 минуте на каждую ногу', ' Растяжка грудных мышц - 2 подхода по 30 секунд', ' Растяжка трицепсов - по 30 секунд на каждую руку', ' Дыхательные упражнения - 3 минуты']]
2023-11-10 00:47:59,201 - INFO - Я выполнил упражнение
2023-11-10 00:48:00,003 - INFO - Пропустить отдых, 1, 1, [['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой'], ['Отжимания - 5 подходов по 20 повторений', ' Планка - 4 подхода по 1 минуте', ' Берпи - 4 подхода по 15 повторений', ' Отжимания с узкой постановкой рук (для трицепсов) - 4 подхода по 15 повторений'], ['Растяжка квадрицепсов - по 1 минуте на каждую ногу', ' Растяжка грудных мышц - 2 подхода по 30 секунд', ' Растяжка трицепсов - по 30 секунд на каждую руку', ' Дыхательные упражнения - 3 минуты']]
2023-11-10 00:48:01,327 - INFO - Я выполнил упражнение
2023-11-10 00:48:02,342 - INFO - Пропустить отдых, 2, 1, [['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой'], ['Отжимания - 5 подходов по 20 повторений', ' Планка - 4 подхода по 1 минуте', ' Берпи - 4 подхода по 15 повторений', ' Отжимания с узкой постановкой рук (для трицепсов) - 4 подхода по 15 повторений'], ['Растяжка квадрицепсов - по 1 минуте на каждую ногу', ' Растяжка грудных мышц - 2 подхода по 30 секунд', ' Растяжка трицепсов - по 30 секунд на каждую руку', ' Дыхательные упражнения - 3 минуты']]
2023-11-10 00:48:04,232 - INFO - Я выполнил упражнение
2023-11-10 00:48:08,405 - INFO - Пропустить отдых, 3, 1, [['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой'], ['Отжимания - 5 подходов по 20 повторений', ' Планка - 4 подхода по 1 минуте', ' Берпи - 4 подхода по 15 повторений', ' Отжимания с узкой постановкой рук (для трицепсов) - 4 подхода по 15 повторений'], ['Растяжка квадрицепсов - по 1 минуте на каждую ногу', ' Растяжка грудных мышц - 2 подхода по 30 секунд', ' Растяжка трицепсов - по 30 секунд на каждую руку', ' Дыхательные упражнения - 3 минуты']]
2023-11-10 00:48:09,380 - INFO - Я выполнил упражнение
2023-11-10 00:48:10,445 - INFO - Пропустить отдых, 0, 2, [['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой'], ['Отжимания - 5 подходов по 20 повторений', ' Планка - 4 подхода по 1 минуте', ' Берпи - 4 подхода по 15 повторений', ' Отжимания с узкой постановкой рук (для трицепсов) - 4 подхода по 15 повторений'], ['Растяжка квадрицепсов - по 1 минуте на каждую ногу', ' Растяжка грудных мышц - 2 подхода по 30 секунд', ' Растяжка трицепсов - по 30 секунд на каждую руку', ' Дыхательные упражнения - 3 минуты']]
2023-11-10 00:48:11,375 - INFO - Я выполнил упражнение
2023-11-10 00:48:12,323 - INFO - Пропустить отдых, 1, 2, [['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой'], ['Отжимания - 5 подходов по 20 повторений', ' Планка - 4 подхода по 1 минуте', ' Берпи - 4 подхода по 15 повторений', ' Отжимания с узкой постановкой рук (для трицепсов) - 4 подхода по 15 повторений'], ['Растяжка квадрицепсов - по 1 минуте на каждую ногу', ' Растяжка грудных мышц - 2 подхода по 30 секунд', ' Растяжка трицепсов - по 30 секунд на каждую руку', ' Дыхательные упражнения - 3 минуты']]
2023-11-10 00:48:13,570 - INFO - Я выполнил упражнение
2023-11-10 00:48:18,138 - INFO - Пропустить отдых, 2, 2, [['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой'], ['Отжимания - 5 подходов по 20 повторений', ' Планка - 4 подхода по 1 минуте', ' Берпи - 4 подхода по 15 повторений', ' Отжимания с узкой постановкой рук (для трицепсов) - 4 подхода по 15 повторений'], ['Растяжка квадрицепсов - по 1 минуте на каждую ногу', ' Растяжка грудных мышц - 2 подхода по 30 секунд', ' Растяжка трицепсов - по 30 секунд на каждую руку', ' Дыхательные упражнения - 3 минуты']]
2023-11-10 00:48:18,925 - INFO - Я выполнил упражнение
2023-11-10 00:48:19,661 - INFO - Пропустить отдых, 3, 2, [['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой'], ['Отжимания - 5 подходов по 20 повторений', ' Планка - 4 подхода по 1 минуте', ' Берпи - 4 подхода по 15 повторений', ' Отжимания с узкой постановкой рук (для трицепсов) - 4 подхода по 15 повторений'], ['Растяжка квадрицепсов - по 1 минуте на каждую ногу', ' Растяжка грудных мышц - 2 подхода по 30 секунд', ' Растяжка трицепсов - по 30 секунд на каждую руку', ' Дыхательные упражнения - 3 минуты']]
2023-11-10 00:48:20,463 - INFO - Я выполнил упражнение
2023-11-10 00:48:21,333 - INFO - Пропустить отдых, 0, 3, [['Приседания без веса - 3 подхода по 15 повторений', ' Бег на месте - 3 минуты', ' Прыжки на месте - 3 подхода по 30 секунд', ' Размахивание руками - 3 подхода по 20 раз каждой рукой'], ['Отжимания - 5 подходов по 20 повторений', ' Планка - 4 подхода по 1 минуте', ' Берпи - 4 подхода по 15 повторений', ' Отжимания с узкой постановкой рук (для трицепсов) - 4 подхода по 15 повторений'], ['Растяжка квадрицепсов - по 1 минуте на каждую ногу', ' Растяжка грудных мышц - 2 подхода по 30 секунд', ' Растяжка трицепсов - по 30 секунд на каждую руку', ' Дыхательные упражнения - 3 минуты']]
2023-11-10 00:48:40,930 - ERROR - Infinity polling: polling exited
2023-11-10 00:48:40,930 - ERROR - Break infinity polling
2023-11-10 00:49:56,796 - INFO - Новый пользователь с user_id: 940032081, добавляем его в базу данных и начинаем диалог
2023-11-10 00:49:57,015 - INFO - Для пользователя user_id: 940032081 нет контекста. Создаем контекст и счетчик токенов
2023-11-10 00:49:57,015 - INFO - Задаем system на промпт 1
2023-11-10 00:50:12,589 - INFO - Пользователь отправил голосовое сообщение. Вызываем whisper и конвертируем в текст
2023-11-10 00:50:12,862 - INFO - Получили голосовое сообщение от пользователя (user_id: 940032081),  file_info: {'file_id': 'AwACAgIAAxkBAAIO42VNVBSZYIpxzQJHRZfDmhD1N8a_AAJMQAACW5poSunmu4G3v_FuMwQ', 'file_unique_id': 'AgADTEAAAluaaEo', 'file_size': 38641, 'file_path': 'voice/file_136.oga'}, передаем полученный файл в whisper
2023-11-10 00:50:12,864 - INFO - Записваем полученное голосовое сообщение
2023-11-10 00:50:12,864 - INFO - Голосовое успешно записано
2023-11-10 00:50:14,222 - INFO - Получили распознанный текст из голосового сообщения пользователя с user_id: 940032081, сообщение: Привет, меня зовут Геннадий, мне 65 лет, у меня есть турник, у меня есть собака и у меня даже есть коврик для йоги.
2023-11-10 00:50:14,222 - INFO - Добавляем полученный текст в контекст пользователя (user_id: 940032081)
2023-11-10 00:50:18,239 - INFO - Получили ответ от GPT. Ответ: Привет, Геннадий! Спасибо за заполнение анкеты. Какой уровень физической подготовки у тебя? Какая продолжительность одного занятия для тебя оптимальна? Есть ли у тебя какие-либо физические ограничения? И есть ли у тебя какие-либо пожелания по упражнениям?
2023-11-10 00:50:18,239 - INFO - Cчитаем токены для пользователя (user_id: 940032081), итого prompt_1 = 641
2023-11-10 00:50:18,239 - INFO - Переходим к уточняющим вопросам, если они нужны
2023-11-10 00:51:19,712 - ERROR - Infinity polling: polling exited
2023-11-10 00:51:19,713 - ERROR - Break infinity polling
2023-11-10 00:52:12,545 - INFO - Новый пользователь с user_id: 802693897, добавляем его в базу данных и начинаем диалог
2023-11-10 00:52:12,761 - INFO - Для пользователя user_id: 802693897 нет контекста. Создаем контекст и счетчик токенов
2023-11-10 00:52:12,761 - INFO - Задаем system на промпт 1
2023-11-10 00:52:17,591 - INFO - Пользователь отправил текстоовое сообщение
2023-11-10 00:52:17,725 - INFO - Сообщение пользователя (user_id: 802693897): егор мне 17
2023-11-10 00:52:17,725 - INFO - Добавляем полученный текст в контекст пользователя (user_id: 802693897)
2023-11-10 00:52:19,595 - INFO - Получили ответ GPT. Ответ: Привет, Егор! Какой уровень физической подготовки у тебя? И какая продолжительность одного занятия для тебя оптимальна?
2023-11-10 00:52:19,595 - INFO - Считаем токены для пользователя (user_id: 802693897): 802693897, итого prompt_1 = 522
2023-11-10 00:52:19,595 - INFO - Переходим к уточняющим вопросам, если они нужны
2023-11-10 00:52:28,265 - INFO - Ответ пользователя (check_form): 10, 40 минут
2023-11-10 00:52:28,274 - INFO - Добавляем ответ пользователя в контекст
2023-11-10 00:52:29,882 - INFO - Ответ от GPT получен. Ответ: Отлично, Егор! Есть ли у тебя какие-либо физические ограничения? И какие у тебя пожелания по упражнениям?
2023-11-10 00:52:29,891 - INFO - Считаем токены для пользователя (user_id: 802693897): 802693897, итого prompt_1 = 1111
2023-11-10 00:52:29,891 - INFO - Проверяем, есть ли слово тригер(анкета) в ответе от GPT
2023-11-10 00:52:29,891 - INFO - Слово тригер НЕ в ответе от GPT, продолжаем задавать вопросы пользователю
2023-11-10 00:52:32,498 - ERROR - Infinity polling: polling exited
2023-11-10 00:52:32,498 - ERROR - Break infinity polling
2023-11-10 01:03:18,259 - ERROR - Infinity polling: polling exited
2023-11-10 01:03:18,259 - ERROR - Break infinity polling
2023-11-10 01:03:31,170 - INFO - Новый пользователь с user_id: 940032081, добавляем его в базу данных и начинаем диалог
2023-11-10 01:03:31,373 - INFO - Для пользователя user_id: 940032081 нет контекста. Создаем контекст и счетчик токенов
2023-11-10 01:03:31,374 - INFO - Задаем system на промпт 1
2023-11-10 01:03:39,175 - INFO - Пользователь отправил голосовое сообщение. Вызываем whisper и конвертируем в текст
2023-11-10 01:03:39,581 - INFO - Получили голосовое сообщение от пользователя (user_id: 940032081),  file_info: {'file_id': 'AwACAgIAAxkBAAIO72VNVzspK4eOjqeEynvRnnw4_LIDAAJMQAACW5poSunmu4G3v_FuMwQ', 'file_unique_id': 'AgADTEAAAluaaEo', 'file_size': 38641, 'file_path': 'voice/file_136.oga'}, передаем полученный файл в whisper
2023-11-10 01:03:39,583 - INFO - Записваем полученное голосовое сообщение
2023-11-10 01:03:39,583 - INFO - Голосовое успешно записано
2023-11-10 01:03:40,796 - INFO - Получили распознанный текст из голосового сообщения пользователя с user_id: 940032081, сообщение: Привет, меня зовут Геннадий, мне 65 лет, у меня есть турник, у меня есть собака и у меня даже есть коврик для йоги.
2023-11-10 01:03:40,796 - INFO - Добавляем полученный текст в контекст пользователя (user_id: 940032081)
2023-11-10 01:06:24,084 - ERROR - Infinity polling: polling exited
2023-11-10 01:06:24,084 - ERROR - Break infinity polling
2023-11-10 01:06:42,561 - INFO - Новый пользователь с user_id: 940032081, добавляем его в базу данных и начинаем диалог
2023-11-10 01:06:42,762 - INFO - Для пользователя user_id: 940032081 нет контекста. Создаем контекст и счетчик токенов
2023-11-10 01:06:42,762 - INFO - Задаем system на промпт 1
2023-11-10 01:06:48,299 - INFO - Пользователь отправил голосовое сообщение. Вызываем whisper и конвертируем в текст
2023-11-10 01:06:48,565 - INFO - Получили голосовое сообщение от пользователя (user_id: 940032081),  file_info: {'file_id': 'AwACAgIAAxkBAAIO82VNV_gg2E1lja8iAAEEiqEf_6lpSgACTEAAAluaaErp5ruBt7_xbjME', 'file_unique_id': 'AgADTEAAAluaaEo', 'file_size': 38641, 'file_path': 'voice/file_136.oga'}, передаем полученный файл в whisper
2023-11-10 01:06:48,566 - INFO - Записваем полученное голосовое сообщение
2023-11-10 01:06:48,566 - INFO - Голосовое успешно записано
2023-11-10 01:06:49,936 - INFO - Получили распознанный текст из голосового сообщения пользователя с user_id: 940032081, сообщение: Привет, меня зовут Геннадий, мне 65 лет, у меня есть турник, у меня есть собака и у меня даже есть коврик для йоги.
2023-11-10 01:06:49,936 - INFO - Добавляем полученный текст в контекст пользователя (user_id: 940032081)
2023-11-10 01:06:51,539 - INFO - Получили ответ от GPT. Ответ: Привет, Геннадий! Спасибо за информацию. Какой уровень физической подготовки у тебя? И какая продолжительность одного занятия для тебя оптимальна?
2023-11-10 01:06:51,540 - INFO - Считаем токены для пользователя (user_id: 940032081): 940032081, итого prompt_1_input = 520, prompt_1_output = 65
2023-11-10 01:06:51,543 - INFO - Переходим к уточняющим вопросам, если они нужны
2023-11-10 01:07:47,402 - INFO - Ответ пользователя (check_form): Средний уровень, 45 минут
2023-11-10 01:07:47,402 - INFO - Добавляем ответ пользователя в контекст
2023-11-10 01:07:49,023 - INFO - Ответ от GPT получен. Ответ: Спасибо за ответы, Геннадий. У тебя есть какие-либо физические ограничения? И есть ли у тебя какие-либо пожелания по упражнениям?
2023-11-10 01:07:49,023 - INFO - Считаем токены для пользователя (user_id: 940032081): 940032081, итого prompt_1_input = 1125, prompt_1_output = 130
2023-11-10 01:07:49,023 - INFO - Проверяем, есть ли слово тригер(анкета) в ответе от GPT
2023-11-10 01:07:49,024 - INFO - Слово тригер НЕ в ответе от GPT, продолжаем задавать вопросы пользователю
2023-11-10 01:08:08,410 - INFO - Ответ пользователя (check_form): Правое колено, больше приседаний
2023-11-10 01:08:08,410 - INFO - Добавляем ответ пользователя в контекст
2023-11-10 01:08:10,012 - INFO - Ответ от GPT получен. Ответ: Спасибо за информацию, Геннадий. Учту твои ограничения. А какие у тебя пожелания по упражнениям?
2023-11-10 01:08:10,013 - INFO - Считаем токены для пользователя (user_id: 940032081): 940032081, итого prompt_1_input = 1747, prompt_1_output = 181
2023-11-10 01:08:10,013 - INFO - Проверяем, есть ли слово тригер(анкета) в ответе от GPT
2023-11-10 01:08:10,013 - INFO - Слово тригер НЕ в ответе от GPT, продолжаем задавать вопросы пользователю
2023-11-10 01:08:56,159 - INFO - Ответ пользователя (check_form): Больше приседаний
2023-11-10 01:08:56,160 - INFO - Добавляем ответ пользователя в контекст
2023-11-10 01:09:01,161 - INFO - Ответ от GPT получен. Ответ: Спасибо за информацию, Геннадий. Теперь у меня есть все необходимые данные для составления анкеты. Пожалуйста, проверь ее:

Имя: Геннадий
Пол: Мужской
Возраст: 65 лет
Уровень физической подготовки: Средний (5 из 10)
Продолжительность занятия: 45 минут
Физические ограничения: Боль в правом колене
Наличие спортивного инвентаря: Турник, коврик для йоги
Пожелания по упражнениям: Больше приседаний

Если все верно, напиши "Все верно". Если есть какие-то исправления или дополнения, пожалуйста, укажи их.
2023-11-10 01:09:01,162 - INFO - Считаем токены для пользователя (user_id: 940032081): 940032081, итого prompt_1_input = 2381, prompt_1_output = 416
2023-11-10 01:09:01,162 - INFO - Проверяем, есть ли слово тригер(анкета) в ответе от GPT
2023-11-10 01:09:01,162 - INFO - Слово тригер НЕ в ответе от GPT, продолжаем задавать вопросы пользователю
2023-11-10 01:09:29,363 - INFO - Ответ пользователя (check_form): Все верно
2023-11-10 01:09:29,364 - INFO - Добавляем ответ пользователя в контекст
2023-11-10 01:09:33,677 - INFO - Ответ от GPT получен. Ответ: Твоя анкета:
Имя: Геннадий
Пол: Мужской
Возраст: 65 лет
Уровень физической подготовки: Средний (5 из 10)
Продолжительность занятия: 45 минут
Физические ограничения: Боль в правом колене
Наличие спортивного инвентаря: Турник, коврик для йоги
Пожелания по упражнениям: Больше приседаний

Проверь, пожалуйста, все ли верно в анкете. Если есть что-то, что нужно исправить или добавить, напиши об этом.
2023-11-10 01:09:33,678 - INFO - Считаем токены для пользователя (user_id: 940032081): 940032081, итого prompt_1_input = 3024, prompt_1_output = 608
2023-11-10 01:09:33,678 - INFO - Проверяем, есть ли слово тригер(анкета) в ответе от GPT
2023-11-10 01:09:33,678 - INFO - Слово тригре в ответе от GPT, выдаем клаваиатуру, если ответ пользователя положительный, переходим к промпту 2
2023-11-10 01:11:49,394 - INFO - Переходим к финальной проверке анкеты пользователя. Ответ пользователя на форму: Да
2023-11-10 01:11:49,395 - INFO - Пользователь (user_id: 940032081) подтвердил корректность анкеты, начианем составлять для него программу
2023-11-10 01:11:49,559 - INFO - Перед составлением программы, получаем заполненую json форму пользователя без лишнего текста, для того, чтобы передать ее в промпт 2
2023-11-10 01:11:51,955 - INFO - json form {'profile': {'name': 'Геннадий', 'sex': 'мужской', 'age': 65, 'level': 5, 'duration': 45, 'issues': 'правое колено', 'equipment': 'турник, коврик для йоги', 'wishes': 'больше приседаний'}}
2023-11-10 01:11:51,958 - INFO - Получили форму пользователя (user_id: 940032081), форма: {
  "profile": {
    "name": "Геннадий",
    "sex": "мужской",
    "age": 65,
    "level": 5,
    "duration": 45,
    "issues": "правое колено",
    "equipment": "турник, коврик для йоги",
    "wishes": "больше приседаний"
  }
}, передаем ее во 2 промпт
2023-11-10 01:11:51,959 - INFO - Считаем токены для пользователя (user_id: 940032081): 940032081, итого prompt_1_input = 3734, prompt_1_output = 703
2023-11-10 01:11:51,959 - INFO - Создаем программу на основе полученной формы (анкеты), ждем ответ от GPT
2023-11-10 01:12:08,333 - INFO - Ответ от GPT получен, программа готова: Твоя программа тренировки:

**Разминка (10 минут):**
1. Ходьба на месте - 3 минуты
2. Круговые движения плечами - 2 подхода по 10 повторений
3. Наклоны туловища в стороны - 2 подхода по 10 повторений
4. Вращение коленей (аккуратно, учитывая проблемы с правым коленом) - 2 подхода по 8 повторений

**Основная часть (30 минут):**
1. Приседания без отягощения (избегай глубоких приседаний, чтобы не нагружать колено) - 3 подхода по 12 повторений
2. Отжимания от стены - 3 подхода по 10 повторений
3. Подтягивания на турнике (если нет проблем с коленом при подтягивании) - 2 подхода по 5 повторений
4. Планка на предплечьях - 3 подхода по 30 секунд
5. Подъемы туловища с положения лежа на спине (аккуратно, контролируя нагрузку на колено) - 3 подхода по 12 повторений

**Заминка (5 минут):**
1. Потягивания стоя - 2 подхода по 30 секунд
2. Растяжка икроножных мышц - 2 подхода по 30 секунд на каждую ногу
3. Медленные наклоны головы вперед и назад - 2 подхода по 8 повторений
4. Глубокое диафрагмальное дыхание - 3 минуты

Подходит ли тебе эта программа или есть что-то, что ты бы хотел изменить?
2023-11-10 01:12:08,337 - ERROR - Infinity polling exception: unsupported operand type(s) for +=: 'dict' and 'int'
2023-11-10 01:12:08,340 - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 955, in infinity_polling
    self.polling(non_stop=True, timeout=timeout, long_polling_timeout=long_polling_timeout,
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1043, in polling
    self.__threaded_polling(non_stop=non_stop, interval=interval, timeout=timeout, long_polling_timeout=long_polling_timeout,
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1118, in __threaded_polling
    raise e
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1074, in __threaded_polling
    self.worker_pool.raise_exceptions()
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/util.py", line 147, in raise_exceptions
    raise self.exception_info
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/util.py", line 90, in run
    task(*args, **kwargs)
  File "/Users/ekondrashov/PycharmProjects/openai/main.py", line 242, in final_check_form
    tokens[message.from_user.id]["prompt_2"] += int(pre_program.usage.total_tokens)
TypeError: unsupported operand type(s) for +=: 'dict' and 'int'

2023-11-10 01:13:49,340 - ERROR - Infinity polling: polling exited
2023-11-10 01:13:49,340 - ERROR - Break infinity polling
2023-11-10 01:14:49,596 - INFO - Новый пользователь с user_id: 940032081, добавляем его в базу данных и начинаем диалог
2023-11-10 01:14:50,448 - INFO - Для пользователя user_id: 940032081 нет контекста. Создаем контекст и счетчик токенов
2023-11-10 01:14:50,449 - INFO - Задаем system на промпт 1
2023-11-10 01:14:59,524 - INFO - Пользователь отправил голосовое сообщение. Вызываем whisper и конвертируем в текст
2023-11-10 01:14:59,873 - INFO - Получили голосовое сообщение от пользователя (user_id: 940032081),  file_info: {'file_id': 'AwACAgIAAxkBAAIPAmVNWeOSoK43VaGL3gPWK9Hk5blLAAJMQAACW5poSunmu4G3v_FuMwQ', 'file_unique_id': 'AgADTEAAAluaaEo', 'file_size': 38641, 'file_path': 'voice/file_136.oga'}, передаем полученный файл в whisper
2023-11-10 01:14:59,875 - INFO - Записваем полученное голосовое сообщение
2023-11-10 01:14:59,876 - INFO - Голосовое успешно записано
2023-11-10 01:15:01,373 - INFO - Получили распознанный текст из голосового сообщения пользователя с user_id: 940032081, сообщение: Привет, меня зовут Геннадий, мне 65 лет, у меня есть турник, у меня есть собака и у меня даже есть коврик для йоги.
2023-11-10 01:15:01,374 - INFO - Добавляем полученный текст в контекст пользователя (user_id: 940032081)
2023-11-10 01:15:04,652 - INFO - Получили ответ от GPT. Ответ: Привет, Геннадий! Спасибо за ответы. Какой уровень физической подготовки у тебя? Какая продолжительность одного занятия для тебя оптимальна? Есть ли у тебя какие-либо физические ограничения? И какие у тебя пожелания по упражнениям?
2023-11-10 01:15:04,653 - INFO - Считаем токены для пользователя (user_id: 940032081): 940032081, итого prompt_1_input = 520, prompt_1_output = 109
2023-11-10 01:15:04,653 - INFO - Переходим к уточняющим вопросам, если они нужны
2023-11-10 01:16:12,466 - INFO - Ответ пользователя (check_form): Отличный, 50 минут, нету, нету
2023-11-10 01:16:12,467 - INFO - Добавляем ответ пользователя в контекст
2023-11-10 01:16:17,254 - INFO - Ответ от GPT получен. Ответ: Спасибо за ответы, Геннадий! Вот твоя анкета:

Имя: Геннадий
Пол: Мужской
Возраст: 65 лет
Уровень физической подготовки: 10
Продолжительность занятия: 50 минут
Физические ограничения: Отсутствуют
Наличие спортивного инвентаря: Турник, коврик для йоги
Пожелания по упражнениям: Нету

Проверь, пожалуйста, все ли верно в анкете. Если есть какие-то исправления или дополнения, напиши их.
2023-11-10 01:16:17,254 - INFO - Считаем токены для пользователя (user_id: 940032081): 940032081, итого prompt_1_input = 1171, prompt_1_output = 304
2023-11-10 01:16:17,255 - INFO - Проверяем, есть ли слово тригер(анкета) в ответе от GPT
2023-11-10 01:16:17,255 - INFO - Слово тригре в ответе от GPT, выдаем клаваиатуру, если ответ пользователя положительный, переходим к промпту 2
2023-11-10 01:17:10,701 - INFO - Переходим к финальной проверке анкеты пользователя. Ответ пользователя на форму: Да
2023-11-10 01:17:10,702 - INFO - Пользователь (user_id: 940032081) подтвердил корректность анкеты, начианем составлять для него программу
2023-11-10 01:17:10,778 - INFO - Перед составлением программы, получаем заполненую json форму пользователя без лишнего текста, для того, чтобы передать ее в промпт 2
2023-11-10 01:17:13,691 - INFO - json form {'profile': {'name': 'Геннадий', 'sex': 'мужской', 'age': 65, 'level': 1, 'duration': 50, 'issues': 'нету', 'equipment': 'турник, коврик для йоги', 'wishes': 'нету'}}
2023-11-10 01:17:13,695 - INFO - Получили форму пользователя (user_id: 940032081), форма: {
  "profile": {
    "name": "Геннадий",
    "sex": "мужской",
    "age": 65,
    "level": 1,
    "duration": 50,
    "issues": "нету",
    "equipment": "турник, коврик для йоги",
    "wishes": "нету"
  }
}, передаем ее во 2 промпт
2023-11-10 01:17:13,695 - INFO - Считаем токены для пользователя (user_id: 940032081): 940032081, итого prompt_1_input = 1889, prompt_1_output = 393
2023-11-10 01:17:13,695 - INFO - Создаем программу на основе полученной формы (анкеты), ждем ответ от GPT
2023-11-10 01:17:28,328 - INFO - Ответ от GPT получен, программа готова: Твоя программа тренировки включает в себя разминку, основную часть и заминку. Учитывая твой уровень подготовки и возраст, я сделал акцент на безопасности и постепенном увеличении нагрузки.

**Разминка (5-10 минут):**
1. Ходьба на месте – 2 минуты.
2. Подъемы рук вверх с глубоким дыханием – 10 повторений.
3. Повороты корпуса – 10 повторений в каждую сторону.
4. Наклоны вперед, руки к полу (не стараться касаться пола, если есть дискомфорт) – 10 повторений.

**Основная часть:**
1. Приседания без веса, удерживая равновесие – 2 подхода по 5 повторений.
2. Отжимания от стены – 2 подхода по 5 повторений.
3. Подтягивания на турнике с помощью (если самостоятельно тяжело) – 1 подход по 2-3 повторения.
4. Планка на предплечьях – 1 подход на 10 секунд.

**Заминка (5-10 минут):**
1. Растяжка икр – по 20 секунд на каждую ногу.
2. Растяжка бедер – по 20 секунд на каждую ногу.
3. Глубокое дыхание в позе "бабочка" (сидя, стопы вместе, колени разведены) – 1 минута.
4. Релаксация в положении лежа на спине, руки и ноги расслаблены – 2 минуты.

Подходит ли тебе такая программа или есть пункты, которые ты бы хотел изменить?
2023-11-10 01:17:28,328 - INFO - Считаем токены для пользователя (user_id: 940032081): 940032081, итого prompt_2_input = 558, prompt_2_output = 529
2023-11-10 01:18:21,505 - INFO - from check_program Не навижу приседания
2023-11-10 01:18:31,267 - INFO - Считаем токены для пользователя (user_id: 940032081): 940032081, итого prompt_2_input = 1130, prompt_2_output = 974
2023-11-10 01:19:12,393 - INFO - from check_program Да
2023-11-10 01:19:12,495 - INFO - Сохраняем программу для пользователя 940032081
2023-11-10 01:19:21,216 - INFO - json prog: {
  "training": {
    "Разминка": [
      "Ходьба на месте - 2 минуты",
      "Подъемы рук вверх с глубоким дыханием - 10 повторений",
      "Повороты корпуса - 10 повторений в каждую сторону",
      "Наклоны вперед, руки к полу - 10 повторений"
    ],
    "Основная часть": [
      "Приседания без веса, удерживая равновесие - 2 подхода по 5 повторений",
      "Отжимания от стены - 2 подхода по 5 повторений",
      "Подтягивания на турнике с помощью (если самостоятельно тяжело) - 1 подход по 2-3 повторения",
      "Планка на предплечьях - 1 подход на 10 секунд"
    ],
    "Заминка": [
      "Растяжка икр - по 20 секунд на каждую ногу",
      "Растяжка бедер - по 20 секунд на каждую ногу",
      "Глубокое дыхание в позе 'бабочка' (сидя, стопы вместе, колени разведены) - 1 минута",
      "Релаксация в положении лежа на спине, руки и ноги расслаблены - 2 минуты"
    ]
  }
}
2023-11-10 01:22:43,363 - INFO - {
  "schedule": [
    {
      "dayOfWeek": "Понедельник",
      "time": "18:00"
    },
    {
      "dayOfWeek": "Среда",
      "time": "15:00"
    },
    {
      "dayOfWeek": "Суббота",
      "time": "15:00"
    }
  ]
}
2023-11-10 01:28:42,527 - ERROR - Infinity polling: polling exited
2023-11-10 01:28:42,527 - ERROR - Break infinity polling
2023-11-10 01:29:10,791 - INFO - Новый пользователь с user_id: 940032081, добавляем его в базу данных и начинаем диалог
2023-11-10 01:29:11,024 - INFO - Для пользователя user_id: 940032081 нет контекста. Создаем контекст и счетчик токенов
2023-11-10 01:29:11,024 - INFO - Задаем system на промпт 1
2023-11-10 01:29:29,948 - INFO - Пользователь отправил голосовое сообщение. Вызываем whisper и конвертируем в текст
2023-11-10 01:29:30,368 - INFO - Получили голосовое сообщение от пользователя (user_id: 940032081),  file_info: {'file_id': 'AwACAgIAAxkBAAIPFmVNXUmxpZSZxZxbeYd7-_YidvuIAAJVQAACW5poSg3wNAKrTvKEMwQ', 'file_unique_id': 'AgADVUAAAluaaEo', 'file_size': 48720, 'file_path': 'voice/file_137.oga'}, передаем полученный файл в whisper
2023-11-10 01:29:30,369 - INFO - Записваем полученное голосовое сообщение
2023-11-10 01:29:30,369 - INFO - Голосовое успешно записано
2023-11-10 01:29:32,121 - INFO - Получили распознанный текст из голосового сообщения пользователя с user_id: 940032081, сообщение: Диктуй быстренько. Привет, я Николай, учусь заниматься спортом, мне 17 лет, из спортивных возможностей у меня всё отлично, ничего не болит, есть турник и валик для йоги.
2023-11-10 01:29:32,121 - INFO - Добавляем полученный текст в контекст пользователя (user_id: 940032081)
2023-11-10 01:29:33,909 - INFO - Получили ответ от GPT. Ответ: Как ты оцениваешь свой уровень физической подготовки от 1 до 10? Какая продолжительность одного занятия для тебя оптимальна?
2023-11-10 01:29:33,909 - INFO - Считаем токены для пользователя (user_id: 940032081): 940032081, итого prompt_1_input = 543, prompt_1_output = 55
2023-11-10 01:29:33,909 - INFO - Переходим к уточняющим вопросам, если они нужны
2023-11-10 01:33:11,165 - INFO - Ответ пользователя (check_form): /start
2023-11-10 01:33:11,167 - INFO - Добавляем ответ пользователя в контекст
2023-11-10 01:33:12,592 - INFO - Ответ от GPT получен. Ответ: Привет! Для составления анкеты мне нужно задать несколько вопросов. Готов ответить на них?
2023-11-10 01:33:12,593 - INFO - Считаем токены для пользователя (user_id: 940032081): 940032081, итого prompt_1_input = 1150, prompt_1_output = 92
2023-11-10 01:33:12,593 - INFO - Проверяем, есть ли слово тригер(анкета) в ответе от GPT
2023-11-10 01:33:12,593 - INFO - Слово тригер НЕ в ответе от GPT, продолжаем задавать вопросы пользователю
2023-11-10 01:33:24,540 - ERROR - Infinity polling: polling exited
2023-11-10 01:33:24,540 - ERROR - Break infinity polling
2023-11-10 01:33:37,894 - INFO - Новый пользователь с user_id: 940032081, добавляем его в базу данных и начинаем диалог
2023-11-10 01:33:38,113 - INFO - Для пользователя user_id: 940032081 нет контекста. Создаем контекст и счетчик токенов
2023-11-10 01:33:38,113 - INFO - Задаем system на промпт 1
2023-11-10 01:34:32,915 - INFO - Пользователь отправил текстоовое сообщение
2023-11-10 01:34:33,005 - INFO - Сообщение пользователя (user_id: 940032081): Меня зовут Гоша, мне 18, есть футбольный мяч и бутсы
2023-11-10 01:34:33,005 - INFO - Добавляем полученный текст в контекст пользователя (user_id: 940032081)
2023-11-10 01:34:35,246 - INFO - Получили ответ GPT. Ответ: Как ты оцениваешь свой уровень физической подготовки по шкале от 1 до 10? Какая продолжительность одного занятия для тебя оптимальна?
2023-11-10 01:34:35,246 - INFO - Считаем токены для пользователя (user_id: 940032081): 940032081, итого prompt_1_input = 493, prompt_1_output = 60
2023-11-10 01:34:35,247 - INFO - Переходим к уточняющим вопросам, если они нужны
2023-11-10 01:34:56,847 - INFO - Ответ пользователя (check_form): Ну где то средне 5, минут 30-35
2023-11-10 01:34:56,849 - INFO - Добавляем ответ пользователя в контекст
2023-11-10 01:34:58,537 - INFO - Ответ от GPT получен. Ответ: Есть ли у тебя какие-либо физические ограничения? Какие упражнения ты бы хотел включить в свою тренировку?
2023-11-10 01:34:58,537 - INFO - Считаем токены для пользователя (user_id: 940032081): 940032081, итого prompt_1_input = 1071, prompt_1_output = 112
2023-11-10 01:34:58,537 - INFO - Проверяем, есть ли слово тригер(анкета) в ответе от GPT
2023-11-10 01:34:58,538 - INFO - Слово тригер НЕ в ответе от GPT, продолжаем задавать вопросы пользователю
2023-11-10 01:35:14,563 - INFO - Ответ пользователя (check_form): Нету, в целом нет
2023-11-10 01:35:14,564 - INFO - Добавляем ответ пользователя в контекст
2023-11-10 01:35:17,330 - INFO - Ответ от GPT получен. Ответ: Есть ли у тебя какие-либо физические ограничения? Какие упражнения ты бы хотел включить в свою тренировку?
2023-11-10 01:35:17,330 - INFO - Считаем токены для пользователя (user_id: 940032081): 940032081, итого prompt_1_input = 1662, prompt_1_output = 164
2023-11-10 01:35:17,331 - INFO - Проверяем, есть ли слово тригер(анкета) в ответе от GPT
2023-11-10 01:35:17,331 - INFO - Слово тригер НЕ в ответе от GPT, продолжаем задавать вопросы пользователю
2023-11-10 01:35:47,493 - INFO - Ответ пользователя (check_form): Нет, в целом нет
2023-11-10 01:35:47,495 - INFO - Добавляем ответ пользователя в контекст
2023-11-10 01:35:49,485 - INFO - Ответ от GPT получен. Ответ: Есть ли у тебя какие-либо физические ограничения? И какие у тебя пожелания по упражнениям?
2023-11-10 01:35:49,486 - INFO - Считаем токены для пользователя (user_id: 940032081): 940032081, итого prompt_1_input = 2265, prompt_1_output = 209
2023-11-10 01:35:49,486 - INFO - Проверяем, есть ли слово тригер(анкета) в ответе от GPT
2023-11-10 01:35:49,486 - INFO - Слово тригер НЕ в ответе от GPT, продолжаем задавать вопросы пользователю
2023-11-10 01:36:33,314 - ERROR - Infinity polling: polling exited
2023-11-10 01:36:33,315 - ERROR - Break infinity polling
2023-11-10 01:37:16,873 - INFO - Новый пользователь с user_id: 802693897, добавляем его в базу данных и начинаем диалог
2023-11-10 01:37:17,076 - INFO - Для пользователя user_id: 802693897 нет контекста. Создаем контекст и счетчик токенов
2023-11-10 01:37:17,076 - INFO - Задаем system на промпт 1
2023-11-10 01:37:22,848 - INFO - Пользователь отправил текстоовое сообщение
2023-11-10 01:37:22,927 - INFO - Сообщение пользователя (user_id: 802693897): егор мне 17
2023-11-10 01:37:22,927 - INFO - Добавляем полученный текст в контекст пользователя (user_id: 802693897)
2023-11-10 01:37:24,724 - INFO - Получили ответ GPT. Ответ: Как ты оцениваешь свой уровень физической подготовки по шкале от 1 до 10? Какая продолжительность одного занятия для тебя оптимальна?
2023-11-10 01:37:24,725 - INFO - Считаем токены для пользователя (user_id: 802693897): 802693897, итого prompt_1_input = 470, prompt_1_output = 60
2023-11-10 01:37:24,725 - INFO - Переходим к уточняющим вопросам, если они нужны
2023-11-10 01:37:34,969 - INFO - Ответ пользователя (check_form): 5, 50 минут
2023-11-10 01:37:34,970 - INFO - Добавляем ответ пользователя в контекст
2023-11-10 01:37:44,800 - INFO - Ответ от GPT получен. Ответ: Есть ли у тебя какие-либо физические ограничения? Какой у тебя спортивный инвентарь?
2023-11-10 01:37:44,800 - INFO - Считаем токены для пользователя (user_id: 802693897): 802693897, итого prompt_1_input = 1014, prompt_1_output = 102
2023-11-10 01:37:44,800 - INFO - Проверяем, есть ли слово тригер(анкета) в ответе от GPT
2023-11-10 01:37:44,800 - INFO - Слово тригер НЕ в ответе от GPT, продолжаем задавать вопросы пользователю
2023-11-10 01:37:51,278 - INFO - Ответ пользователя (check_form): нет, есть турник
2023-11-10 01:37:51,279 - INFO - Добавляем ответ пользователя в контекст
2023-11-10 01:37:53,957 - INFO - Ответ от GPT получен. Ответ: Есть ли у тебя какие-либо физические ограничения? Какие упражнения ты бы хотел включить в свою тренировку?
2023-11-10 01:37:53,957 - INFO - Считаем токены для пользователя (user_id: 802693897): 802693897, итого prompt_1_input = 1569, prompt_1_output = 154
2023-11-10 01:37:53,958 - INFO - Проверяем, есть ли слово тригер(анкета) в ответе от GPT
2023-11-10 01:37:53,958 - INFO - Слово тригер НЕ в ответе от GPT, продолжаем задавать вопросы пользователю
2023-11-10 01:38:13,079 - INFO - Ответ пользователя (check_form): нет, отжимания
2023-11-10 01:38:13,079 - INFO - Добавляем ответ пользователя в контекст
2023-11-10 01:38:15,513 - INFO - Ответ от GPT получен. Ответ: Есть ли у тебя физические ограничения? Какие упражнения ты бы хотел включить в свою программу тренировок?
2023-11-10 01:38:15,513 - INFO - Считаем токены для пользователя (user_id: 802693897): 802693897, итого prompt_1_input = 2135, prompt_1_output = 202
2023-11-10 01:38:15,513 - INFO - Проверяем, есть ли слово тригер(анкета) в ответе от GPT
2023-11-10 01:38:15,514 - INFO - Слово тригер НЕ в ответе от GPT, продолжаем задавать вопросы пользователю
2023-11-10 01:38:44,568 - ERROR - Infinity polling: polling exited
2023-11-10 01:38:44,569 - ERROR - Break infinity polling
2023-11-10 01:38:47,764 - INFO - Пользователь с user_id: 802693897 уже существует
2023-11-10 01:38:56,526 - ERROR - Infinity polling: polling exited
2023-11-10 01:38:56,526 - ERROR - Break infinity polling
2023-11-10 01:39:02,352 - INFO - Новый пользователь с user_id: 802693897, добавляем его в базу данных и начинаем диалог
2023-11-10 01:39:02,543 - INFO - Для пользователя user_id: 802693897 нет контекста. Создаем контекст и счетчик токенов
2023-11-10 01:39:02,543 - INFO - Задаем system на промпт 1
2023-11-10 01:39:06,209 - INFO - Пользователь отправил текстоовое сообщение
2023-11-10 01:39:06,464 - INFO - Сообщение пользователя (user_id: 802693897): егор мне 17
2023-11-10 01:39:06,464 - INFO - Добавляем полученный текст в контекст пользователя (user_id: 802693897)
2023-11-10 01:39:09,416 - INFO - Получили ответ GPT. Ответ: Как ты оцениваешь свой уровень физической подготовки по шкале от 1 до 10? Какая продолжительность одного занятия для тебя оптимальна?
2023-11-10 01:39:09,416 - INFO - Считаем токены для пользователя (user_id: 802693897): 802693897, итого prompt_1_input = 470, prompt_1_output = 60
2023-11-10 01:39:09,417 - INFO - Переходим к уточняющим вопросам, если они нужны
2023-11-10 01:39:17,225 - INFO - Ответ пользователя (check_form): 10, 50 минут
2023-11-10 01:39:17,225 - INFO - Добавляем ответ пользователя в контекст
2023-11-10 01:39:18,850 - INFO - Ответ от GPT получен. Ответ: Есть ли у тебя какие-либо физические ограничения или противопоказания для занятий спортом? И какие у тебя пожелания по упражнениям?
2023-11-10 01:39:18,850 - INFO - Считаем токены для пользователя (user_id: 802693897): 802693897, итого prompt_1_input = 1014, prompt_1_output = 121
2023-11-10 01:39:18,850 - INFO - Проверяем, есть ли слово тригер(анкета) в ответе от GPT
2023-11-10 01:39:18,850 - INFO - Слово тригер НЕ в ответе от GPT, продолжаем задавать вопросы пользователю
2023-11-10 01:39:30,664 - INFO - Ответ пользователя (check_form): нет, хочу отжимания
2023-11-10 01:39:30,664 - INFO - Добавляем ответ пользователя в контекст
2023-11-10 01:39:33,878 - INFO - Ответ от GPT получен. Ответ: Твоя анкета:
Имя: Егор
Пол: Мужской
Возраст: 17 лет
Уровень физической подготовки: 10/10
Продолжительность занятия: 50 минут
Физические ограничения: Нет
Наличие спортивного инвентаря: Да
Пожелания по упражнениям: Хочу делать отжимания.

Все верно? Если что-то нужно изменить, напиши, что именно.
2023-11-10 01:39:33,878 - INFO - Считаем токены для пользователя (user_id: 802693897): 802693897, итого prompt_1_input = 1572, prompt_1_output = 270
2023-11-10 01:39:33,878 - INFO - Проверяем, есть ли слово тригер(анкета) в ответе от GPT
2023-11-10 01:39:33,879 - INFO - Слово тригре в ответе от GPT, выдаем клаваиатуру, если ответ пользователя положительный, переходим к промпту 2
2023-11-10 01:39:39,234 - INFO - Переходим к финальной проверке анкеты пользователя. Ответ пользователя на форму: Да
2023-11-10 01:39:39,235 - INFO - Пользователь (user_id: 802693897) подтвердил корректность анкеты, начианем составлять для него программу
2023-11-10 01:39:39,400 - INFO - Перед составлением программы, получаем заполненую json форму пользователя без лишнего текста, для того, чтобы передать ее в промпт 2
2023-11-10 01:39:41,630 - INFO - json form {'profile': {'name': 'Егор', 'sex': 'мужской', 'age': 17, 'level': 10, 'duration': '50 минут', 'issues': '', 'equipment': 'есть', 'wishes': 'отжимания'}}
2023-11-10 01:39:41,633 - INFO - Получили форму пользователя (user_id: 802693897), форма: {
  "profile": {
    "name": "Егор",
    "sex": "мужской",
    "age": 17,
    "level": 10,
    "duration": "50 минут",
    "issues": "",
    "equipment": "есть",
    "wishes": "отжимания"
  }
}, передаем ее во 2 промпт
2023-11-10 01:39:41,634 - INFO - Считаем токены для пользователя (user_id: 802693897): 802693897, итого prompt_1_input = 2197, prompt_1_output = 345
2023-11-10 01:39:41,634 - INFO - Создаем программу на основе полученной формы (анкеты), ждем ответ от GPT
2023-11-10 01:39:51,938 - INFO - Ответ от GPT получен, программа готова: Твоя программа тренировки:

**Разминка (10 минут):**
1. Пробежка на месте - 3 минуты.
2. Вращение плечами - 15 повторений в каждую сторону.
3. Махи руками - 20 повторений вперед и назад.
4. Наклоны туловища - 20 повторений в каждую сторону.

**Основная часть (35 минут):**
1. Отжимания - 5 подходов по 20 повторений.
2. Приседания с прыжком - 4 подхода по 15 повторений.
3. Подтягивания (если есть турник) - 4 подхода по 12 повторений.
4. Планка - 4 подхода по 1 минуте.
5. Берпи - 4 подхода по 15 повторений.

**Заминка (5 минут):**
1. Растяжка грудных мышц - 30 секунд на каждую сторону.
2. Растяжка бицепсов и предплечий - 30 секунд на каждую руку.
3. Растяжка квадрицепсов - 30 секунд на каждую ногу.
4. Поза ребенка - 1 минута.

Подходит ли тебе эта программа или есть что-то, что ты хотел бы изменить?
2023-11-10 01:39:51,938 - INFO - Считаем токены для пользователя (user_id: 802693897): 802693897, итого prompt_2_input = 544, prompt_2_output = 386
2023-11-10 01:39:55,263 - INFO - from check_program Да
2023-11-10 01:39:55,368 - INFO - Сохраняем программу для пользователя 802693897
2023-11-10 01:40:01,702 - INFO - json prog: {
  "training": [
    {
      "Разминка": [
        "Пробежка на месте - 3 минуты",
        "Вращение плечами - 15 повторений в каждую сторону",
        "Махи руками - 20 повторений вперед и назад",
        "Наклоны туловища - 20 повторений в каждую сторону"
      ]
    },
    {
      "Основная часть": [
        "Отжимания - 5 подходов по 20 повторений",
        "Приседания с прыжком - 4 подхода по 15 повторений",
        "Подтягивания (если есть турник) - 4 подхода по 12 повторений",
        "Планка - 4 подхода по 1 минуте",
        "Берпи - 4 подхода по 15 повторений"
      ]
    },
    {
      "Заминка": [
        "Растяжка грудных мышц - 30 секунд на каждую сторону",
        "Растяжка бицепсов и предплечий - 30 секунд на каждую руку",
        "Растяжка квадрицепсов - 30 секунд на каждую ногу",
        "Поза ребенка - 1 минута"
      ]
    }
  ]
}
2023-11-10 01:40:01,705 - ERROR - Infinity polling exception: 'list' object has no attribute 'items'
2023-11-10 01:40:01,707 - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 955, in infinity_polling
    self.polling(non_stop=True, timeout=timeout, long_polling_timeout=long_polling_timeout,
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1043, in polling
    self.__threaded_polling(non_stop=non_stop, interval=interval, timeout=timeout, long_polling_timeout=long_polling_timeout,
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1118, in __threaded_polling
    raise e
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/__init__.py", line 1074, in __threaded_polling
    self.worker_pool.raise_exceptions()
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/util.py", line 147, in raise_exceptions
    raise self.exception_info
  File "/Users/ekondrashov/PycharmProjects/openai/venv/lib/python3.10/site-packages/telebot/util.py", line 90, in run
    task(*args, **kwargs)
  File "/Users/ekondrashov/PycharmProjects/openai/main.py", line 289, in check_program
    BotDatabase.insert_user_program(message.from_user.id, json_program_ready)
  File "/Users/ekondrashov/PycharmProjects/openai/database.py", line 53, in insert_user_program
    for key, val in program['training'].items():
AttributeError: 'list' object has no attribute 'items'

2023-11-10 01:49:05,072 - ERROR - Infinity polling: polling exited
2023-11-10 01:49:05,075 - ERROR - Break infinity polling
2023-11-10 01:52:03,341 - INFO - Новый пользователь с user_id: 940032081, добавляем его в базу данных и начинаем диалог
2023-11-10 01:52:03,531 - INFO - Для пользователя user_id: 940032081 нет контекста. Создаем контекст и счетчик токенов
2023-11-10 01:52:03,532 - INFO - Задаем system на промпт 1
2023-11-10 01:52:11,414 - INFO - Пользователь отправил текстоовое сообщение
2023-11-10 01:52:11,496 - INFO - Сообщение пользователя (user_id: 940032081): Меня зовут Гоша, мне 18, есть футбольный мяч и бутсы
2023-11-10 01:52:11,497 - INFO - Добавляем полученный текст в контекст пользователя (user_id: 940032081)
2023-11-10 01:52:13,470 - INFO - Получили ответ GPT. Ответ: Какой уровень физической подготовки у тебя? Какая продолжительность одного занятия для тебя оптимальна? Есть ли у тебя физические ограничения?
2023-11-10 01:52:13,471 - INFO - Считаем токены для пользователя (user_id: 940032081): 940032081, итого prompt_1_input = 493, prompt_1_output = 63
2023-11-10 01:52:13,471 - INFO - Переходим к уточняющим вопросам, если они нужны
2023-11-10 01:52:50,341 - INFO - Ответ пользователя (check_form): Средний, 30-40 минут, нету
2023-11-10 01:52:50,342 - INFO - Добавляем ответ пользователя в контекст
2023-11-10 01:52:54,029 - INFO - Ответ от GPT получен. Ответ: Твоя анкета:
Имя: Гоша
Пол: Мужской
Возраст: 18 лет
Уровень физической подготовки: Средний (5 из 10)
Продолжительность занятия: 30-40 минут
Физические ограничения: Отсутствуют
Наличие спортивного инвентаря: Футбольный мяч и бутсы
Пожелания по упражнениям: Не указаны

Все верно? Если есть что-то, что нужно исправить, пожалуйста, напиши.
2023-11-10 01:52:54,030 - INFO - Считаем токены для пользователя (user_id: 940032081): 940032081, итого prompt_1_input = 1071, prompt_1_output = 236
2023-11-10 01:52:54,030 - INFO - Проверяем, есть ли слово тригер(анкета) в ответе от GPT
2023-11-10 01:52:54,030 - INFO - Слово тригре в ответе от GPT, выдаем клаваиатуру, если ответ пользователя положительный, переходим к промпту 2
2023-11-10 01:53:07,340 - INFO - Переходим к финальной проверке анкеты пользователя. Ответ пользователя на форму: Да
2023-11-10 01:53:07,341 - INFO - Пользователь (user_id: 940032081) подтвердил корректность анкеты, начианем составлять для него программу
2023-11-10 01:53:07,414 - INFO - Перед составлением программы, получаем заполненую json форму пользователя без лишнего текста, для того, чтобы передать ее в промпт 2
2023-11-10 01:53:12,359 - INFO - json form {'profile': {'name': 'Гоша', 'sex': 'мужской', 'age': 18, 'level': 5, 'duration': '30-40 минут', 'issues': 'нету', 'equipment': 'футбольный мяч и бутсы', 'wishes': ''}}
2023-11-10 01:53:12,362 - INFO - Получили форму пользователя (user_id: 940032081), форма: {
  "profile": {
    "name": "Гоша",
    "sex": "мужской",
    "age": 18,
    "level": 5,
    "duration": "30-40 минут",
    "issues": "нету",
    "equipment": "футбольный мяч и бутсы",
    "wishes": ""
  }
}, передаем ее во 2 промпт
2023-11-10 01:53:12,363 - INFO - Считаем токены для пользователя (user_id: 940032081): 940032081, итого prompt_1_input = 1716, prompt_1_output = 323
2023-11-10 01:53:12,363 - INFO - Создаем программу на основе полученной формы (анкеты), ждем ответ от GPT
2023-11-10 01:53:25,056 - INFO - Ответ от GPT получен, программа готова: Твоя программа тренировки включает в себя следующие этапы:

Разминка (5-10 минут):
1. Бег на месте – 2 минуты.
2. Высокие подъемы коленей – 2 подхода по 30 секунд.
3. Вращение руками – 2 подхода по 30 секунд в каждую сторону.
4. Растяжка – наклоны в стороны, вперед, вращение тазом – по 30 секунд каждое упражнение.

Основная часть (20-25 минут):
1. Приседания с мячом – 3 подхода по 15 повторений.
2. Отжимания – 3 подхода по 10 повторений.
3. Подъемы на носки, держась за мяч – 3 подхода по 20 повторений.
4. Планка с передачей мяча из рук в руки – 3 подхода по 30 секунд.

Заминка (5 минут):
1. Растяжка – поза "бабочка" – 1 подход на 1 минуту.
2. Растяжка икр – 2 подхода по 30 секунд на каждую ногу.
3. Повороты туловища – 2 подхода по 30 секунд.
4. Глубокое дыхание – 1-2 минуты, сосредоточься на расслаблении мышц.

Подходит ли тебе такая программа или есть пожелания/изменения?
2023-11-10 01:53:25,056 - INFO - Считаем токены для пользователя (user_id: 940032081): 940032081, итого prompt_2_input = 556, prompt_2_output = 434
2023-11-10 01:54:23,544 - INFO - from check_program Да
2023-11-10 01:54:23,628 - INFO - Сохраняем программу для пользователя 940032081
2023-11-10 01:54:32,095 - INFO - json prog: {
  "training": {
    "Разминка": [
      "1. Бег на месте – 2 минуты.",
      "2. Высокие подъемы коленей – 2 подхода по 30 секунд.",
      "3. Вращение руками – 2 подхода по 30 секунд в каждую сторону.",
      "4. Растяжка – наклоны в стороны, вперед, вращение тазом – по 30 секунд каждое упражнение."
    ],
    "Основная часть": [
      "1. Приседания с мячом – 3 подхода по 15 повторений.",
      "2. Отжимания – 3 подхода по 10 повторений.",
      "3. Подъемы на носки, держась за мяч – 3 подхода по 20 повторений.",
      "4. Планка с передачей мяча из рук в руки – 3 подхода по 30 секунд."
    ],
    "Заминка": [
      "1. Растяжка – поза \"бабочка\" – 1 подход на 1 минуту.",
      "2. Растяжка икр – 2 подхода по 30 секунд на каждую ногу.",
      "3. Повороты туловища – 2 подхода по 30 секунд.",
      "4. Глубокое дыхание – 1-2 минуты, сосредоточься на расслаблении мышц."
    ]
  }
}
2023-11-10 01:55:10,745 - INFO - {
  "schedule": [
    {
      "dayOfWeek": "Понедельник",
      "time": "18:00"
    },
    {
      "dayOfWeek": "Среда",
      "time": "19:00"
    },
    {
      "dayOfWeek": "Суббота",
      "time": "15:00"
    }
  ]
}
2023-11-10 01:59:57,800 - ERROR - Infinity polling: polling exited
2023-11-10 01:59:57,800 - ERROR - Break infinity polling
